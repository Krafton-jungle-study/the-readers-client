<div id="page-container">
<div id="pf1" class="pf w0 h0" data-page-no="1"><div class="pc pc1 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg1.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">78<span class="ff2 fs1 ls1 ws1">    <span class="ff1 ls2 ws2">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws3">   <span class="fc1 ws2">|<span class="_ _1"></span></span></span><span class="ff2">  JUL<span class="_ _0"></span>Y 2016  <span class="fc1 ls1">|<span class="_ _1"></span></span>  VOL. 59  <span class="fc1 ls1">|<span class="_ _1"></span></span>  NO. 7</span></span></span></div><div class="t m0 x2 h3 y2 ff3 fs2 fc2 sc0 ls3 ws2">contributed art<span class="_ _2"></span>icles</div><div class="t m0 x3 h4 y3 ff1 fs3 fc0 sc0 ls4 ws4">DOI:10.1145/2854146<span class="_ _3"></span> </div><div class="t m0 x4 h5 y4 ff4 fs4 fc3 sc0 ls5 ws2">Google’<span class="_ _3"></span>s monolithic repository provides <span class="ls1"> </span></div><div class="t m0 x4 h5 y5 ff4 fs4 fc3 sc0 ls5 ws2">a common source of truth for tens of </div><div class="t m0 x4 h5 y6 ff4 fs4 fc3 sc0 ls5 ws2">thousands of developers around the world. </div><div class="t m0 x4 h6 y7 ff1 fs5 fc0 sc0 ls6 ws2">BY RA<span class="_ _0"></span>CHEL POTVIN AND JOSH LEVENBERG </div><div class="t m0 x1 h7 y8 ff5 fs6 fc4 sc0 ls7 ws2">EARL<span class="_ _0"></span>Y GOOGLE EMPLOYEES <span class="ff6 fs4 ls8">decided to work with a<span class="_ _0"></span> </span></div><div class="t m0 x1 h7 y9 ff6 fs4 fc4 sc0 ls8 ws2">shared codebase managed through a centralized </div><div class="t m0 x1 h7 ya ff6 fs4 fc4 sc0 ls8 ws2">source control system. This approach has served </div><div class="t m0 x1 h7 yb ff6 fs4 fc4 sc0 ls8 ws2">Google well for more than 16 years, and today the vast </div><div class="t m0 x1 h7 yc ff6 fs4 fc4 sc0 ls8 ws2">majority of Google’s software assets continues to be </div><div class="t m0 x1 h7 yd ff6 fs4 fc4 sc0 ls8 ws2">stored in a single, shared repository<span class="_ _3"></span>. Meanwhile, the </div><div class="t m0 x1 h7 ye ff6 fs4 fc4 sc0 ls8 ws2">number of Google software developers has steadily </div><div class="t m0 x1 h7 yf ff6 fs4 fc4 sc0 ls8 ws2">increased, and the size of the Google codebase </div><div class="t m0 x1 h7 y10 ff6 fs4 fc4 sc0 ls8 ws2">has grown exponentially (see Figure 1). As a result, </div><div class="t m0 x1 h7 y11 ff6 fs4 fc4 sc0 ls8 ws2">the technology used to host the codebase has also </div><div class="t m0 x1 h7 y12 ff6 fs4 fc4 sc0 ls8 ws2">evolved signiﬁcantly<span class="_ _3"></span>. </div><div class="t m0 x5 h8 y13 ff7 fs7 fc0 sc0 ls1 ws5">This article outlines the scale of that </div><div class="t m0 x6 h8 y14 ff7 fs7 fc0 sc0 ls1 ws6">codebase and details Google’s custom-</div><div class="t m0 x6 h8 y15 ff7 fs7 fc0 sc0 ls1 ws7">built monolithic source repository and </div><div class="t m0 x6 h8 y16 ff7 fs7 fc0 sc0 ls1 ws8">the reasons the model was chosen. </div><div class="t m0 x6 h8 y17 ff7 fs7 fc0 sc0 ls1 ws9">Google uses a homegrown version-con<span class="ws2">-</span></div><div class="t m0 x6 h8 y18 ff7 fs7 fc0 sc0 ls1 wsa">trol system to host one large codebase </div><div class="t m0 x6 h8 y19 ff7 fs7 fc0 sc0 ls1 wsb">visible to, and used by, most of the soft<span class="ws2">-</span></div><div class="t m0 x6 h8 y1a ff7 fs7 fc0 sc0 ls1 wsc">ware developers in the company<span class="_ _3"></span>. This </div><div class="t m0 x6 h8 y1b ff7 fs7 fc0 sc0 ls1 wsd">centralized system is the foundation of </div><div class="t m0 x6 h8 y1c ff7 fs7 fc0 sc0 ls1 wsd">many of Google’s developer workﬂows. </div><div class="t m0 x6 h8 y1d ff7 fs7 fc0 sc0 ls1 wse">Here, we provide background on the </div><div class="t m0 x6 h8 y1e ff7 fs7 fc0 sc0 ls1 wsf">systems and workﬂows that make fea<span class="ws2">-</span></div><div class="t m0 x6 h8 y1f ff7 fs7 fc0 sc0 ls1 ws10">sible managing and working produc<span class="ws2">-</span></div><div class="t m0 x6 h8 y20 ff7 fs7 fc0 sc0 ls1 ws11">tively with such a large repository<span class="_ _3"></span>. We </div><div class="t m0 x6 h8 y21 ff7 fs7 fc0 sc0 ls1 ws12">explain Google’s “trunk-based devel<span class="ws2">-</span></div><div class="t m0 x6 h8 y22 ff7 fs7 fc0 sc0 ls1 ws13">opment” strategy and the support sys<span class="ws2">-</span></div><div class="t m0 x6 h8 y23 ff7 fs7 fc0 sc0 ls1 ws14">tems that structure workﬂow and keep </div><div class="t m0 x6 h8 y24 ff7 fs7 fc0 sc0 ls1 ws15">Google’s codebase healthy, including </div><div class="t m0 x6 h8 y25 ff7 fs7 fc0 sc0 ls1 ws16">software for static analysis, code clean<span class="ws2">-</span></div><div class="t m0 x6 h8 y26 ff7 fs7 fc0 sc0 ls1 ws2">up, and streamlined code review<span class="_ _3"></span>. </div><div class="t m0 x6 h9 y27 ff1 fs7 fc0 sc0 ls1 ws2">Google-Scale </div><div class="t m0 x6 h8 y28 ff7 fs7 fc0 sc0 ls9 ws17">Google’s monolithic software reposi<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y29 ff7 fs7 fc0 sc0 ls9 ws18">tory, which is used by 95% of its soft<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y2a ff7 fs7 fc0 sc0 ls9 ws19">ware developers worldwide, meets </div><div class="t m0 x6 h8 y2b ff7 fs7 fc0 sc0 ls9 ws1a">the definition of an ultra-large-scale</div><div class="t m0 x7 ha y2c ff7 fs8 fc0 sc0 ls1 ws2">4</div><div class="t m0 x8 h8 y2d ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x6 h8 y2e ff7 fs7 fc0 sc0 ls9 ws1b">system, providing evidence the sin<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y2f ff7 fs7 fc0 sc0 ls9 ws1c">gle-source repository model can be </div><div class="t m0 x6 h8 y30 ff7 fs7 fc0 sc0 ls9 ws2">scaled successfully<span class="_ _3"></span>. </div><div class="t m0 x5 h8 y31 ff7 fs7 fc0 sc0 ls1 ws1d">The Google codebase includes ap<span class="ws2">-</span></div><div class="t m0 x6 h8 y32 ff7 fs7 fc0 sc0 ls1 ws1e">proximately one billion ﬁles and has </div><div class="t m0 x6 h8 y33 ff7 fs7 fc0 sc0 ls1 ws1f">a history of approximately 35 million </div><div class="t m0 x6 h8 y34 ff7 fs7 fc0 sc0 ls1 ws20">commits spanning Google’s entire 18-</div><div class="t m0 x6 h8 y35 ff7 fs7 fc0 sc0 ls1 ws6">year existence. The repository contains </div><div class="t m0 x6 h8 y36 ff7 fs7 fc0 sc0 ls1 ws2">86TB</div><div class="t m0 x9 ha y37 ff7 fs8 fc0 sc0 ls1 ws2">a</div><div class="t m0 xa h8 y38 ff7 fs7 fc0 sc0 ls1 ws21"> of data, including approximately </div><div class="t m0 x6 hb y39 ff7 fs0 fc0 sc0 ls1 ws22">a <span class="_ _4"> </span>Total size of uncompressed content, excluding </div><div class="t m0 xb hb y3a ff7 fs0 fc0 sc0 ls1 ws2">release branches.</div><div class="t m0 x1 hc y3b ff1 fs9 fc0 sc0 lsa ws2">Why Goo<span class="_ _5"></span>g<span class="_ _5"></span>l<span class="_ _5"></span>e<span class="_ _6"></span> </div><div class="t m0 x1 hc y3c ff1 fs9 fc0 sc0 lsb ws2">Stores Billions<span class="_ _7"></span> </div><div class="t m0 x1 hc y3d ff1 fs9 fc0 sc0 lsa ws2">of Lines<span class="_ _6"></span> <span class="_ _5"></span><span class="ls1"> </span></div><div class="t m0 x1 hc y3e ff1 fs9 fc0 sc0 lsa ws2">of Code<span class="_ _6"></span> <span class="_ _5"></span><span class="ls1"> </span></div><div class="t m0 x1 hc y3f ff1 fs9 fc0 sc0 lsa ws2">in a Single<span class="_ _6"></span> </div><div class="t m0 x1 hc y40 ff1 fs9 fc0 sc0 lsa ws23">Repositor<span class="_ _2"></span>y<span class="_ _6"></span> </div><div class="t m0 xc hd y41 ff8 fsa fc3 sc0 lsc ws24"> <span class="_ _8"> </span>k<span class="_ _1"></span>ey<span class="_ _1"></span> ins<span class="_ _2"></span>igh<span class="_ _1"></span>t<span class="_ _1"></span>s</div><div class="t m0 xd he y42 ff9 fsb fc0 sc0 ls1 ws2"> <span class="_ _9"></span>˽</div><div class="t m0 xb h2 y43 ff1 fs0 fc0 sc0 ls1 ws2">Google has shown the monolithic model </div><div class="t m0 xb h2 y44 ff1 fs0 fc0 sc0 ls1 ws2">of source code management can scale </div><div class="t m0 xb h2 y45 ff1 fs0 fc0 sc0 ls1 ws2">to a repository of one billion ﬁles, 35 </div><div class="t m0 xb h2 y46 ff1 fs0 fc0 sc0 ls1 ws2">million commits, and tens of thousands of </div><div class="t m0 xb h2 y47 ff1 fs0 fc0 sc0 ls1 ws2">developers. </div><div class="t m0 xd he y48 ff9 fsb fc0 sc0 ls1 ws2"> <span class="_ _9"></span>˽</div><div class="t m0 xb h2 y49 ff1 fs0 fc0 sc0 ls1 ws2">Beneﬁts include uniﬁed versioning, </div><div class="t m0 xb h2 y4a ff1 fs0 fc0 sc0 ls1 ws2">extensive code sharing, simpliﬁed </div><div class="t m0 xb h2 y4b ff1 fs0 fc0 sc0 ls1 ws2">dependency management, atomic </div><div class="t m0 xb h2 y4c ff1 fs0 fc0 sc0 ls1 ws2">changes, large-scale refactoring, </div><div class="t m0 xb h2 y4d ff1 fs0 fc0 sc0 ls1 ws2">collaboration across teams, ﬂexible code </div><div class="t m0 xb h2 y4e ff1 fs0 fc0 sc0 ls1 ws2">ownership, and code visibility<span class="_ _0"></span>. </div><div class="t m0 xd he y4f ff9 fsb fc0 sc0 ls1 ws2"> <span class="_ _9"></span>˽</div><div class="t m0 xb h2 y50 ff1 fs0 fc0 sc0 ls1 ws2">Drawbacks include having to create </div><div class="t m0 xb h2 y51 ff1 fs0 fc0 sc0 ls1 ws2">and scale tools for development and </div><div class="t m0 xb h2 y52 ff1 fs0 fc0 sc0 ls1 ws2">execution and maintain code health, as </div><div class="t m0 xb h2 y53 ff1 fs0 fc0 sc0 ls1 ws2">well as potential for codebase complexity </div><div class="t m0 xb h2 y54 ff1 fs0 fc0 sc0 ls1 ws2">(such as unnecessary dependencies).</div><a class="l" href="http://dx.doi.org/10.1145/2854146"><div class="d m1" style="border-style:none;position:absolute;left:286.239000px;bottom:661.526000px;width:83.761000px;height:8.260000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://crossmark.crossref.org/dialog/?doi=10.1145%2F2854146&amp;domain=pdf&amp;date_stamp=2016-06-24"><div class="d m1" style="border-style:none;position:absolute;left:0.000000px;bottom:685.000000px;width:26.000000px;height:26.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf2" class="pf w0 h0" data-page-no="2"><div class="pc pc2 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg2.png"/><div class="t m0 xe h2 y1 ff2 fs1 fc0 sc0 ls2 ws2">JUL<span class="_ _3"></span>Y 2016  |  VOL. 59  |  NO. 7  <span class="fc1 ls1">|<span class="_ _1"></span><span class="fc0 ws3">  </span></span><span class="ff1">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws1">    </span><span class="fs0 ls0 ws0">79</span></span></div><div class="t m2 xf hf y54 ffa fsc fc0 sc0 lsd ws2">IMAGE BY IWONA US<span class="_ _0"></span>AKIEWICZ/ANDRIJ BORYS ASSOCIA<span class="_ _0"></span>TES</div><div class="t m0 x4 h8 y55 ff7 fs7 fc0 sc0 ls1 ws25">two billion lines of code in nine million </div><div class="t m0 x4 h8 y56 ff7 fs7 fc0 sc0 ls1 ws26">unique source ﬁles. The total number </div><div class="t m0 x4 h8 y57 ff7 fs7 fc0 sc0 ls1 ws27">of ﬁles also includes source ﬁles cop<span class="ws2">-</span></div><div class="t m0 x4 h8 y58 ff7 fs7 fc0 sc0 ls1 ws28">ied into release branches, ﬁles that are </div><div class="t m0 x4 h8 y59 ff7 fs7 fc0 sc0 ls1 ws29">deleted at the latest revision, conﬁgu<span class="ws2">-</span></div><div class="t m0 x4 h8 y5a ff7 fs7 fc0 sc0 ls1 ws2a">ration ﬁles, documentation, and sup<span class="ws2">-</span></div><div class="t m0 x4 h8 y5b ff7 fs7 fc0 sc0 ls1 ws2b">porting data ﬁles; see the table here for </div><div class="t m0 x4 h8 y5c ff7 fs7 fc0 sc0 ls1 wsc">a summary of Google’s repository sta<span class="ws2">-</span></div><div class="t m0 x4 h8 y5d ff7 fs7 fc0 sc0 ls1 ws2">tistics from January 2015. </div><div class="t m0 x10 h8 y5e ff7 fs7 fc0 sc0 ls1 ws2c">In 2014, approximately 15 million </div><div class="t m0 x4 h8 y5f ff7 fs7 fc0 sc0 ls1 ws2d">lines of code were changed</div><div class="t m0 x11 ha y60 ff7 fs8 fc0 sc0 ls1 ws2">b</div><div class="t m0 x12 h8 y61 ff7 fs7 fc0 sc0 ls1 ws2d"> in approxi<span class="ws2">-</span></div><div class="t m0 x4 h8 y62 ff7 fs7 fc0 sc0 ls1 ws2e">mately 250,000 ﬁles in the Google re<span class="ws2">-</span></div><div class="t m0 x4 h8 y63 ff7 fs7 fc0 sc0 ls1 ws2f">pository on a weekly basis. The Linux </div><div class="t m0 x4 h8 y64 ff7 fs7 fc0 sc0 ls1 ws30">kernel is a prominent example of a </div><div class="t m0 x4 h8 y65 ff7 fs7 fc0 sc0 ls1 ws31">large open source software repository </div><div class="t m0 x4 h8 y66 ff7 fs7 fc0 sc0 ls1 ws32">containing approximately 15 million </div><div class="t m0 x4 h8 y67 ff7 fs7 fc0 sc0 ls1 ws2">lines of code in 40,000 ﬁles.</div><div class="t m0 x12 ha y68 ff7 fs8 fc0 sc0 ls1 ws2">14</div><div class="t m0 x13 h8 y69 ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x10 h8 y6a ff7 fs7 fc0 sc0 ls1 ws33">Google’s codebase is shared by more </div><div class="t m0 x4 hb y6b ff7 fs0 fc0 sc0 ls1 ws34">b <span class="_"> </span>Includes only reviewed and committed code </div><div class="t m0 x14 hb y6c ff7 fs0 fc0 sc0 ls1 ws35">and excludes commits performed by auto<span class="ws2">-</span></div><div class="t m0 x14 hb y6d ff7 fs0 fc0 sc0 ls1 ws36">mated systems, as well as commits to release </div><div class="t m0 x14 hb y6e ff7 fs0 fc0 sc0 ls1 ws37">branches, data ﬁles, generated ﬁles, open </div><div class="t m0 x14 hb y6f ff7 fs0 fc0 sc0 ls1 ws38">source ﬁles imported into the repository, and </div><div class="t m0 x14 hb y70 ff7 fs0 fc0 sc0 ls1 ws2">other non-source-code ﬁles.</div><div class="t m0 x15 h8 y55 ff7 fs7 fc0 sc0 ls1 ws39">than 25,000 Google software develop<span class="ws2">-</span></div><div class="t m0 x15 h8 y56 ff7 fs7 fc0 sc0 ls1 ws1a">ers from dozens of ofﬁces in countries </div><div class="t m0 x15 h8 y57 ff7 fs7 fc0 sc0 ls1 ws3a">around the world. On a typical work<span class="ws2">-</span></div><div class="t m0 x15 h8 y58 ff7 fs7 fc0 sc0 ls1 ws25">day, they commit 16,000 changes to the </div><div class="t m0 x15 h8 y59 ff7 fs7 fc0 sc0 ls1 ws7">codebase, and another 24,000 changes </div><div class="t m0 x15 h8 y5a ff7 fs7 fc0 sc0 ls1 ws3b">are committed by automated systems. </div><div class="t m0 x15 h8 y5b ff7 fs7 fc0 sc0 ls1 ws3c">Each day the repository serves billions </div><div class="t m0 x15 h8 y5c ff7 fs7 fc0 sc0 ls1 ws5">of ﬁle read requests, with approximate<span class="ws2">-</span></div><div class="t m0 x15 h8 y5d ff7 fs7 fc0 sc0 ls1 ws3d">ly 800,000 queries per second during </div><div class="t m0 x15 h8 y5e ff7 fs7 fc0 sc0 ls1 ws3e">peak trafﬁc and an average of approxi<span class="ws2">-</span></div><div class="t m0 x15 h8 y5f ff7 fs7 fc0 sc0 ls1 ws3f">mately 500,000 queries per second </div><div class="t m0 x15 h8 y71 ff7 fs7 fc0 sc0 ls1 ws40">each workday<span class="_ _3"></span>. Most of this trafﬁc origi<span class="ws2">-</span></div><div class="t m0 x15 h8 y72 ff7 fs7 fc0 sc0 ls1 wsa">nates from Google’s distributed build-</div><div class="t m0 x15 h8 y73 ff7 fs7 fc0 sc0 ls1 ws2">and-test systems.</div><div class="t m0 x3 ha y74 ff7 fs8 fc0 sc0 ls1 ws2">c</div><div class="t m0 x16 h8 y75 ff7 fs7 fc0 sc0 lse ws41">Figure 2 reports the number of </div><div class="t m0 x15 h8 y76 ff7 fs7 fc0 sc0 lse ws42">unique human committers per week </div><div class="t m0 x15 h8 y77 ff7 fs7 fc0 sc0 lse ws43">to the main repository, January 2010–</div><div class="t m0 x15 h8 y78 ff7 fs7 fc0 sc0 lse ws44">July 2015. Figure 3 reports commits </div><div class="t m0 x15 h8 y79 ff7 fs7 fc0 sc0 lse ws45">per week to Google’s main repository </div><div class="t m0 x15 h8 y7a ff7 fs7 fc0 sc0 lse ws46">over the same time period. The line </div><div class="t m0 x15 h8 y7b ff7 fs7 fc0 sc0 lse ws47">for total commits includes data for </div><div class="t m0 x15 hb y7c ff7 fs0 fc0 sc0 ls1 ws48">c <span class="_ _a"> </span>Google open sourced a subset of its internal </div><div class="t m0 x17 hb y7d ff7 fs0 fc0 sc0 ls1 ws2">build system; see http://www<span class="_ _0"></span>.bazel.io </div><div class="t m0 x18 h8 y55 ff7 fs7 fc0 sc0 lse ws3d">both the interactive use case, or hu<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y56 ff7 fs7 fc0 sc0 lse ws49">man users, and automated use cases. </div><div class="t m0 x18 h8 y57 ff7 fs7 fc0 sc0 lse ws3e">Larger dips in both graphs occur dur<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y58 ff7 fs7 fc0 sc0 lse ws4a">ing holidays affecting a signiﬁcant </div><div class="t m0 x18 h8 y59 ff7 fs7 fc0 sc0 lse ws4b">number of employees (such as Christ<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y5a ff7 fs7 fc0 sc0 lse ws4c">mas Day and New Y<span class="_ _0"></span>ear’s Day, Ameri<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y5b ff7 fs7 fc0 sc0 lse ws4d">can Thanksgiving Day, and American </div><div class="t m0 x18 h8 y5c ff7 fs7 fc0 sc0 lse ws2">Independence Day). </div><div class="t m0 x19 h8 y5d ff7 fs7 fc0 sc0 ls1 ws4e">In October 2012, Google’s central </div><div class="t m0 x18 h8 y5e ff7 fs7 fc0 sc0 ls1 ws4f">repository added support for Windows </div><div class="t m0 x18 h8 y5f ff7 fs7 fc0 sc0 ls1 ws50">and Mac users (until then it was Linux-</div><div class="t m0 x18 h8 y71 ff7 fs7 fc0 sc0 ls1 ws15">only), and the existing Windows and </div><div class="t m0 x18 h8 y72 ff7 fs7 fc0 sc0 ls1 ws51">Mac repository was merged with the </div><div class="t m0 x18 h8 y73 ff7 fs7 fc0 sc0 ls1 ws52">main repository<span class="_ _3"></span>. Google’s tooling for </div><div class="t m0 x18 h8 y7e ff7 fs7 fc0 sc0 ls1 ws53">repository merges attributes all histori<span class="ws2">-</span></div><div class="t m0 x18 h8 y7f ff7 fs7 fc0 sc0 ls1 ws54">cal changes being merged to their orig<span class="ws2">-</span></div><div class="t m0 x18 h8 y80 ff7 fs7 fc0 sc0 ls1 ws55">inal authors, hence the corresponding </div><div class="t m0 x18 h8 y81 ff7 fs7 fc0 sc0 ls1 ws43">bump in the graph in Figure 2. The ef<span class="ws2">-</span></div><div class="t m0 x18 h8 y82 ff7 fs7 fc0 sc0 ls1 ws39">fect of this merge is also apparent in </div><div class="t m0 x18 h8 y83 ff7 fs7 fc0 sc0 ls1 ws2">Figure 1. </div><div class="t m0 x19 h8 y84 ff7 fs7 fc0 sc0 ls1 ws56">The commits-per-week graph show<span class="_ _1"></span>s </div><div class="t m0 x18 h8 y85 ff7 fs7 fc0 sc0 ls9 ws57">the commit rate was dominated by </div><div class="t m0 x18 h8 y86 ff7 fs7 fc0 sc0 ls9 ws8">human users until 2012, at which </div><div class="t m0 x18 h8 y87 ff7 fs7 fc0 sc0 ls9 ws3a">point Google switched to a custom-</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf3" class="pf w0 h0" data-page-no="3"><div class="pc pc3 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg3.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">80<span class="ff2 fs1 ls1 ws1">    <span class="ff1 ls2 ws2">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws3">   <span class="fc1 ws2">|<span class="_ _1"></span></span></span><span class="ff2">  JUL<span class="_ _3"></span>Y 2016  <span class="fc1 ls1">|<span class="_ _2"> </span></span>  V<span class="_ _0"></span>OL. 59  <span class="fc1 ls1">|<span class="_ _1"></span></span>  NO. 7</span></span></span></div><div class="t m0 x1a h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x6 h8 y89 ff7 fs7 fc0 sc0 ls9 ws58">source-control implementation for </div><div class="t m0 x6 h8 y8a ff7 fs7 fc0 sc0 ls9 ws59">hosting the ce<span class="ls10">ntral repository, as </span></div><div class="t m0 x6 h8 y8b ff7 fs7 fc0 sc0 ls10 ws5a">discussed later<span class="_ _0"></span>. Following this tran<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y8c ff7 fs7 fc0 sc0 ls10 ws5b">sition, automated commits to the re<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y8d ff7 fs7 fc0 sc0 ls10 ws5c">pository began to increase. Growth in </div><div class="t m0 x6 h8 y8e ff7 fs7 fc0 sc0 ls10 ws5d">the commit rate continues primarily </div><div class="t m0 x6 h8 y8f ff7 fs7 fc0 sc0 ls1 ws2">du<span class="_ _1"></span>e to automation. </div><div class="t m0 x5 h8 y90 ff7 fs7 fc0 sc0 ls1 ws5e">Managing this scale of repository </div><div class="t m0 x6 h8 y91 ff7 fs7 fc0 sc0 ls11 ws5f">a<span class="_ _0"></span>nd<span class="_ _0"></span> <span class="_ _0"></span>ac<span class="_ _0"></span>tivity on it has been an ongoing </div><div class="t m0 x6 h8 y92 ff7 fs7 fc0 sc0 ls9 ws60">challenge for Google. Despite several </div><div class="t m0 x6 h8 y93 ff7 fs7 fc0 sc0 ls12 ws61">years of experimentation, Google<span class="_ _0"></span> </div><div class="t m0 x6 h8 y94 ff7 fs7 fc0 sc0 ls13 ws4b">was not able to find a comme<span class="_ _0"></span>rc<span class="_ _0"></span>i<span class="_ _0"></span>al<span class="_ _0"></span><span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y95 ff7 fs7 fc0 sc0 ls12 ws62">ly available or open source version-</div><div class="t m0 x6 h8 y96 ff7 fs7 fc0 sc0 ls1 ws63">c<span class="_ _1"></span>on<span class="_ _1"></span>trol system to support such scale </div><div class="t m0 x6 h8 y97 ff7 fs7 fc0 sc0 ls10 ws64">in<span class="_ _0"></span> a <span class="_ _0"></span>sin<span class="_ _0"></span>gle repository<span class="_ _0"></span>. The Google </div><div class="t m0 x6 h8 y98 ff7 fs7 fc0 sc0 ls10 ws2c">proprietary system that was b<span class="_ _0"></span>uil<span class="_ _0"></span>t t<span class="_ _0"></span>o </div><div class="t m0 x6 h8 y99 ff7 fs7 fc0 sc0 ls1 ws65">store, version, and vend this codebase </div><div class="t m0 x6 h8 y9a ff7 fs7 fc0 sc0 ls1 ws2">is code-named Piper<span class="_ _0"></span>. </div><div class="t m0 x6 h9 y9b ff1 fs7 fc0 sc0 ls1 ws2">Background </div><div class="t m0 x6 h8 y9c ff7 fs7 fc0 sc0 ls14 ws66">Before reviewing the advantages </div><div class="t m0 x6 h8 y9d ff7 fs7 fc0 sc0 ls14 ws67">and disadvantages of working with </div><div class="t m0 x6 h8 y9e ff7 fs7 fc0 sc0 ls14 ws68">a monolithic repository, some back<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y9f ff7 fs7 fc0 sc0 ls14 ws69">ground on Google’s tooling and work<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 ya0 ff7 fs7 fc0 sc0 ls14 ws2">ﬂows is needed. </div><div class="t m0 x5 h8 ya1 ffb fs7 fc0 sc0 ls1 ws50">Piper and CitC. <span class="ff7">Piper stores a single </span></div><div class="t m0 x6 h8 ya2 ff7 fs7 fc0 sc0 ls10 ws6a">large repository and is implement<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 ya3 ff7 fs7 fc0 sc0 ls10 ws46">ed on top of standard Google infra<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 ya4 ff7 fs7 fc0 sc0 ls10 ws6b">structure, originally Bigtable,</div><div class="t m0 x1b ha ya5 ff7 fs8 fc0 sc0 ls1 ws2">2</div><div class="t m0 x1c h8 ya6 ff7 fs7 fc0 sc0 ls10 ws6b"> now </div><div class="t m0 x6 h8 ya7 ff7 fs7 fc0 sc0 ls10 ws6c">Spanner<span class="_ _0"></span>.</div><div class="t m0 x1d ha y37 ff7 fs8 fc0 sc0 ls1 ws2">3</div><div class="t m0 x1e h8 y38 ff7 fs7 fc0 sc0 ls10 ws6d"> Piper is distributed over </div><div class="t m0 x6 h8 ya8 ff7 fs7 fc0 sc0 ls10 ws6e">10 Google data centers around the </div><div class="t m0 x6 h8 ya9 ff7 fs7 fc0 sc0 ls10 ws6f">world, relying on the Paxos</div><div class="t m0 x1f ha yaa ff7 fs8 fc0 sc0 ls1 ws2">6</div><div class="t m0 x20 h8 yab ff7 fs7 fc0 sc0 ls10 ws6f"> algorithm </div><div class="t m0 x6 h8 yac ff7 fs7 fc0 sc0 ls11 ws70">to guarantee consistency across rep<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 yad ff7 fs7 fc0 sc0 ls11 ws71">licas. This architecture provides a </div><div class="t m0 x6 h8 yae ff7 fs7 fc0 sc0 ls11 ws72">high level of redundancy and helps </div><div class="t m0 x6 h8 yaf ff7 fs7 fc0 sc0 ls11 ws73">optimize latency for Google soft<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 yb0 ff7 fs7 fc0 sc0 ls11 ws74">ware developers, no matter where </div><div class="t m0 x6 h8 yb1 ff7 fs7 fc0 sc0 ls11 ws4c">they work. In addition, caching and </div><div class="t m0 x6 h8 yb2 ff7 fs7 fc0 sc0 ls11 ws75">asynchronous operations hide much </div><div class="t m0 x6 h8 yb3 ff7 fs7 fc0 sc0 ls11 ws76">of the network latency from develop<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 yb4 ff7 fs7 fc0 sc0 ls11 ws77">ers. This is important becau<span class="_ _0"></span>se <span class="_ _0"></span>gai<span class="_ _0"></span>n<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 yb5 ff7 fs7 fc0 sc0 lse ws49">ing the full beneﬁt of Google’s cloud-</div><div class="t m0 x6 h8 yb6 ff7 fs7 fc0 sc0 lse ws68">based toolchain requires developers </div><div class="t m0 x6 h8 yb7 ff7 fs7 fc0 sc0 ls1 ws2">to <span class="_ _1"></span>be online. </div><div class="t m0 x5 h8 yb8 ff7 fs7 fc0 sc0 ls15 ws78">Google relied on one primary P<span class="_ _0"></span>erforce<span class="_ _1"></span> </div><div class="t m0 x6 h8 yb9 ff7 fs7 fc0 sc0 ls15 ws57">instance, hosted on a single machine, </div><div class="t m0 x6 h8 yba ff7 fs7 fc0 sc0 ls15 ws79">coupled with custom caching infrastruc<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 ybb ff7 fs7 fc0 sc0 ls15 ws7a">ture</div><div class="t m0 xc ha ybc ff7 fs8 fc0 sc0 ls1 ws2">1</div><div class="t m0 x21 h8 ybd ff7 fs7 fc0 sc0 ls10 wsb"> <span class="_ _0"></span>fo<span class="_ _3"></span>r <span class="_ _3"></span>mo<span class="_ _3"></span>re<span class="_ _3"></span> t<span class="_ _0"></span>h<span class="_ _0"></span>an 10 years prior to the<span class="_ _0"></span> </div><div class="t m0 x6 h8 ybe ff7 fs7 fc0 sc0 ls10 ws60">launch of Piper<span class="_ _0"></span>. Continued scaling of </div><div class="t m0 x22 h2 ybf ff1 fs0 fc5 sc0 ls1 ws2">Figure 1. Millions of changes committed to Google’<span class="_ _0"></span>s central repository over time. </div><div class="t m0 x23 h11 yc0 ffc fsd fc0 sc0 ls1 ws2">Jan. 2000<span class="_ _b"> </span>Jan. 2005<span class="_ _b"> </span>Jan. 2010<span class="_ _c"> </span>Jan. 2015</div><div class="t m0 x24 h11 yc1 ffc fsd fc0 sc0 ls1 ws2">10 M</div><div class="t m0 x24 h11 yc2 ffc fsd fc0 sc0 ls1 ws2">20 M</div><div class="t m0 x24 h11 yc3 ffc fsd fc0 sc0 ls1 ws2">30 M</div><div class="t m0 x24 h11 yc4 ffc fsd fc0 sc0 ls1 ws2">40 M</div><div class="t m0 x22 h2 yc5 ff1 fs0 fc5 sc0 ls1 ws2">Figure 2. Human committers per week. </div><div class="t m0 x25 h12 yc6 ffd fs3 fc0 sc0 ls1 ws2">Jan. 2010<span class="_ _d"> </span>Jan. 2011<span class="_ _e"> </span>Jan. 2012<span class="_ _f"> </span>Jan. 2013<span class="_ _10"> </span>Jan. 2014<span class="_ _11"> </span>Jan. 2015</div><div class="t m0 x26 h12 yc7 ffd fs3 fc0 sc0 ls1 ws2">5,000</div><div class="t m0 x24 h12 yc8 ffd fs3 fc0 sc0 ls1 ws2">10,000</div><div class="t m0 x24 h12 yc9 ffd fs3 fc0 sc0 ls1 ws2">15,000</div><div class="t m0 x27 h12 yca ffd fs3 fc0 sc0 ls1 ws2">Unique human users per week</div><div class="t m0 x22 h2 ycb ff1 fs0 fc5 sc0 ls1 ws2">Figure 3. Commits per week. </div><div class="t m0 x28 h12 ycc ffe fs3 fc0 sc0 ls1 ws2">Jan. 2010<span class="_ _12"> </span>Jan. 2011<span class="_ _13"> </span>Jan. 2012<span class="_ _12"> </span>Jan. 2013<span class="_ _14"> </span>Jan. 2014<span class="_ _14"> </span>Jan. 2015</div><div class="t m0 x29 h12 ycd ffe fs3 fc0 sc0 ls1 ws2">75,000</div><div class="t m0 x2a h12 yce ffe fs3 fc0 sc0 ls1 ws2">150,000</div><div class="t m0 x2a h12 ycf ffe fs3 fc0 sc0 ls1 ws2">225,000</div><div class="t m0 x2b h12 yd0 ffe fs3 fc0 sc0 ls1 ws2">Human commits<span class="_ _15"> </span>T<span class="_ _3"></span>otal commits</div><div class="t m0 x4 h12 yd1 ffe fs3 fc0 sc0 ls1 ws2">300,000</div><div class="t m0 x18 h2 ybf ff1 fs0 fc5 sc0 ls16 ws2">Google repository statistics, Januar<span class="_ _1"></span>y 2015. </div><div class="t m0 x18 h13 yd2 ff2 fs3 fc0 sc0 ls1 ws2">T<span class="_ _3"></span>otal number of ﬁles<span class="_ _16"> </span>1 billion </div><div class="t m0 x18 h13 yd3 ff2 fs3 fc0 sc0 ls1 ws2">Number of source ﬁles<span class="_ _17"> </span>9 million </div><div class="t m0 x18 h13 yd4 ff2 fs3 fc0 sc0 ls1 ws2">Lines of source code<span class="_ _18"> </span>2 billion </div><div class="t m0 x18 h13 yd5 ff2 fs3 fc0 sc0 ls1 ws2">Depth of history<span class="_ _19"> </span>35 million commits</div><div class="t m0 x18 h13 yd6 ff2 fs3 fc0 sc0 ls1 ws2">Size of content<span class="_ _1a"> </span>86TB</div><div class="t m0 x18 h13 yd7 ff2 fs3 fc0 sc0 ls1 ws2">Commits per workday<span class="_ _1b"> </span>40,000 </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf4" class="pf w0 h0" data-page-no="4"><div class="pc pc4 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg4.png"/><div class="t m0 xe h2 y1 ff2 fs1 fc0 sc0 ls2 ws2">JUL<span class="_ _3"></span>Y 2016  |  VOL. 59  |  NO. 7  <span class="fc1 ls1">|<span class="_ _1"></span><span class="fc0 ws3">  </span></span><span class="ff1">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws1">    </span><span class="fs0 ls0 ws0">81</span></span></div><div class="t m0 x2c h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x4 h8 yd8 ff7 fs7 fc0 sc0 ls10 ws7b">the Google repository was the main </div><div class="t m0 x4 h8 yd9 ff7 fs7 fc0 sc0 ls10 ws2">motivation for developing Piper<span class="_ _0"></span>. </div><div class="t m0 x10 h8 yda ff7 fs7 fc0 sc0 ls14 ws7c">Since Google’s source code is one of </div><div class="t m0 x4 h8 ydb ff7 fs7 fc0 sc0 ls14 ws60">the company’s most important assets, </div><div class="t m0 x4 h8 ydc ff7 fs7 fc0 sc0 ls14 ws7d">security features are a key consider<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ydd ff7 fs7 fc0 sc0 ls14 ws7e">ation in Piper’s design. Piper supports </div><div class="t m0 x4 h8 yde ff7 fs7 fc0 sc0 ls14 ws7f">ﬁle-level access control lists. Most of </div><div class="t m0 x4 h8 ydf ff7 fs7 fc0 sc0 ls14 ws80">the repository is visible to all Piper </div><div class="t m0 x4 h8 ye0 ff7 fs7 fc0 sc0 ls14 ws2b">users;</div><div class="t m0 x2d ha ye1 ff7 fs8 fc0 sc0 ls1 ws2">d</div><div class="t m0 x2e h8 ye2 ff7 fs7 fc0 sc0 ls14 ws81"> however, important conﬁgura<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ye3 ff7 fs7 fc0 sc0 ls14 ws3d">tion ﬁles or ﬁles including business-</div><div class="t m0 x4 h8 ye4 ff7 fs7 fc0 sc0 ls14 ws82">critical algorithms can be more tightly </div><div class="t m0 x4 h8 ye5 ff7 fs7 fc0 sc0 ls14 ws7e">controlled. In addition, read and write </div><div class="t m0 x4 h8 ye6 ff7 fs7 fc0 sc0 ls14 ws83">access to ﬁles in Piper is logged. If sen<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ye7 ff7 fs7 fc0 sc0 ls14 ws84">sitive data is accidentally committed </div><div class="t m0 x4 h8 ye8 ff7 fs7 fc0 sc0 ls14 ws85">to Piper, the ﬁle in question can be </div><div class="t m0 x4 h8 ye9 ff7 fs7 fc0 sc0 ls14 ws86">purged. The read logs allow admin<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 yea ff7 fs7 fc0 sc0 ls14 ws87">istrators to determine if anyone ac<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 yeb ff7 fs7 fc0 sc0 ls14 ws88">cessed the problematic ﬁle before it </div><div class="t m0 x4 h8 yec ff7 fs7 fc0 sc0 ls14 ws2">was removed. </div><div class="t m0 x10 h8 yed ff7 fs7 fc0 sc0 ls1 ws79">In the Piper workﬂow (see Figure 4), </div><div class="t m0 x4 h8 yee ff7 fs7 fc0 sc0 ls1 ws89">developers create a local copy of ﬁles in </div><div class="t m0 x4 h8 yef ff7 fs7 fc0 sc0 ls1 ws8a">the repository before changing them. </div><div class="t m0 x4 h8 yf0 ff7 fs7 fc0 sc0 ls1 ws42">These ﬁles are stored in a workspace </div><div class="t m0 x4 h8 yf1 ff7 fs7 fc0 sc0 ls1 ws70">owned by the developer<span class="_ _0"></span>. A Piper work<span class="ws2">-</span></div><div class="t m0 x4 h8 yf2 ff7 fs7 fc0 sc0 ls1 ws8b">space is comparable to a working copy </div><div class="t m0 x4 h8 yf3 ff7 fs7 fc0 sc0 ls1 ws8c">in Apache Subversion, a local clone </div><div class="t m0 x4 h8 yf4 ff7 fs7 fc0 sc0 ls1 ws5b">in Git, or a client in Perforce. Updates </div><div class="t m0 x4 h8 yf5 ff7 fs7 fc0 sc0 ls1 ws8d">from the Piper repository can be pulled </div><div class="t m0 x4 h8 yf6 ff7 fs7 fc0 sc0 ls1 ws69">into a workspace and merged with on<span class="ws2">-</span></div><div class="t m0 x4 h8 yf7 ff7 fs7 fc0 sc0 ls1 ws31">going work, as desired (see Figure 5). </div><div class="t m0 x4 h8 yf8 ff7 fs7 fc0 sc0 ls1 ws8e">A snapshot of the workspace can be </div><div class="t m0 x4 h8 yf9 ff7 fs7 fc0 sc0 ls1 ws8f">shared with other developers for re<span class="ws2">-</span></div><div class="t m0 x4 h8 yfa ff7 fs7 fc0 sc0 ls1 ws90">view<span class="_ _3"></span>. Files in a workspace are commit<span class="ws2">-</span></div><div class="t m0 x4 h8 yfb ff7 fs7 fc0 sc0 ls1 ws91">ted to the central repository only after </div><div class="t m0 x4 h8 yfc ff7 fs7 fc0 sc0 ls1 ws92">going through the Google code-review </div><div class="t m0 x4 h8 yfd ff7 fs7 fc0 sc0 ls1 ws2">process, as described later<span class="_ _0"></span>. </div><div class="t m0 x10 h8 yfe ff7 fs7 fc0 sc0 ls10 ws93">Most developers access Piper </div><div class="t m0 x4 h8 yff ff7 fs7 fc0 sc0 ls10 ws94">through a system called Clients in </div><div class="t m0 x4 h8 y100 ff7 fs7 fc0 sc0 ls10 ws95">the Cloud, or CitC, which consists of </div><div class="t m0 x4 h8 y101 ff7 fs7 fc0 sc0 ls10 ws96">a cloud-based storage backend and a </div><div class="t m0 x4 h8 y102 ff7 fs7 fc0 sc0 ls10 ws97">Linux-only FUSE</div><div class="t m0 x2f ha y37 ff7 fs8 fc0 sc0 ls17 ws98">13</div><div class="t m0 x30 h8 y38 ff7 fs7 fc0 sc0 ls10 ws97"> ﬁle system. Devel<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ya8 ff7 fs7 fc0 sc0 ls10 ws99">opers see their workspaces as directo<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ya9 ff7 fs7 fc0 sc0 ls10 ws76">ries in the ﬁle system, including their </div><div class="t m0 x4 h8 y103 ff7 fs7 fc0 sc0 ls10 ws9a">changes overlaid on top of the full </div><div class="t m0 x4 h8 y104 ff7 fs7 fc0 sc0 ls10 ws9b">Piper repository<span class="_ _3"></span>. CitC supports code </div><div class="t m0 x4 h8 y105 ff7 fs7 fc0 sc0 ls10 ws9c">browsing and normal Unix tools with </div><div class="t m0 x4 h8 y106 ff7 fs7 fc0 sc0 ls10 ws9d">no need to clone or sync state locally<span class="_ _3"></span>. </div><div class="t m0 x4 h8 y107 ff7 fs7 fc0 sc0 ls10 ws9e">Developers can browse and edit ﬁles </div><div class="t m0 x4 h8 y108 ff7 fs7 fc0 sc0 ls10 ws9f">anywhere across the Piper reposito<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y109 ff7 fs7 fc0 sc0 ls10 wsa0">ry, and only modiﬁed ﬁles are stored </div><div class="t m0 x4 h8 y10a ff7 fs7 fc0 sc0 ls10 wsa1">in their workspace. This structure </div><div class="t m0 x4 h8 y10b ff7 fs7 fc0 sc0 ls10 wsa2">means CitC workspaces typically con<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y10c ff7 fs7 fc0 sc0 ls10 wsa3">sume only a small amount of storage </div><div class="t m0 x4 h8 y10d ff7 fs7 fc0 sc0 ls10 wsa4">(an average workspace has fewer than </div><div class="t m0 x4 h8 y10e ff7 fs7 fc0 sc0 ls10 wsa5">10 ﬁles) while presenting a seamless </div><div class="t m0 x4 h8 y10f ff7 fs7 fc0 sc0 ls10 wsa6">view of the entire Piper codebase to </div><div class="t m0 x4 h8 y110 ff7 fs7 fc0 sc0 ls10 ws2">the developer<span class="_ _0"></span>. </div><div class="t m0 x4 hb y7c ff7 fs0 fc0 sc0 ls1 wsa7">d <span class="_ _1c"> </span>Over 99% of ﬁles stored in Piper are visible to </div><div class="t m0 x14 hb y7d ff7 fs0 fc0 sc0 ls1 ws2">all full-time Google engineers. </div><div class="t m0 x19 h8 yd8 ff7 fs7 fc0 sc0 ls14 wsa8">Several workﬂows take advantage of </div><div class="t m0 x18 h8 yd9 ff7 fs7 fc0 sc0 ls14 ws8a">the availability of uncommitted code </div><div class="t m0 x18 h8 yda ff7 fs7 fc0 sc0 ls14 ws1e">in CitC to make software developers </div><div class="t m0 x18 h8 ydb ff7 fs7 fc0 sc0 ls14 wsa9">working with the large codebase more </div><div class="t m0 x18 h8 ydc ff7 fs7 fc0 sc0 ls14 wsaa">productive. For instance, when send<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 ydd ff7 fs7 fc0 sc0 ls14 wsab">ing a change out for code review, devel<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 yde ff7 fs7 fc0 sc0 ls14 wsac">opers can enable an auto-commit op<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 ydf ff7 fs7 fc0 sc0 ls14 ws7">tion, which is particularly useful when </div><div class="t m0 x18 h8 ye0 ff7 fs7 fc0 sc0 ls14 wsad">code authors and reviewers are in dif<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y111 ff7 fs7 fc0 sc0 ls14 wsae">ferent time zones. When the review is </div><div class="t m0 x18 h8 y112 ff7 fs7 fc0 sc0 ls14 wsaf">marked as complete, the tests will run; </div><div class="t m0 x18 h8 y113 ff7 fs7 fc0 sc0 ls14 wsb0">if they pass, the code will be commit<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y114 ff7 fs7 fc0 sc0 ls14 wsb1">ted to the repository without further </div><div class="t m0 x18 h8 y115 ff7 fs7 fc0 sc0 ls14 wsb2">human intervention. The Google code-</div><div class="t m0 x18 h8 y116 ff7 fs7 fc0 sc0 ls14 ws67">browsing tool CodeSearch supports </div><div class="t m0 x18 h8 y117 ff7 fs7 fc0 sc0 ls14 wsb3">simple edits using CitC workspaces. </div><div class="t m0 x18 h8 y118 ff7 fs7 fc0 sc0 ls14 wsb4">While browsing the repository, devel<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y119 ff7 fs7 fc0 sc0 ls14 ws46">opers can click on a button to enter </div><div class="t m0 x18 h8 y11a ff7 fs7 fc0 sc0 ls14 wsb5">edit mode and make a simple change </div><div class="t m0 x18 h8 y11b ff7 fs7 fc0 sc0 ls14 ws5e">(such as ﬁxing a typo or improving </div><div class="t m0 x16 h8 y11c ff7 fs7 fc0 sc0 ls1 ws4b">All writes to ﬁles are stored as snap<span class="ws2">-</span></div><div class="t m0 x15 h8 y11d ff7 fs7 fc0 sc0 ls1 wsb6">shots in CitC, making it possible to re<span class="ws2">-</span></div><div class="t m0 x15 h8 y11e ff7 fs7 fc0 sc0 ls1 ws96">cover previous stages of work as need<span class="ws2">-</span></div><div class="t m0 x15 h8 y11f ff7 fs7 fc0 sc0 ls1 ws78">ed. Snapshots may be explicitly named, </div><div class="t m0 x15 h8 y120 ff7 fs7 fc0 sc0 ls1 ws2">restored, or tagged for review<span class="_ _3"></span>. </div><div class="t m0 x16 h8 y121 ff7 fs7 fc0 sc0 lse wsb7">CitC workspaces are available on </div><div class="t m0 x15 h8 y122 ff7 fs7 fc0 sc0 lse wsb8">any machine that can connect to the </div><div class="t m0 x15 h8 y123 ff7 fs7 fc0 sc0 lse wsb9">cloud-based storage system, making </div><div class="t m0 x15 h8 y124 ff7 fs7 fc0 sc0 lse wsba">it easy to switch machines and pick </div><div class="t m0 x15 h8 y125 ff7 fs7 fc0 sc0 lse ws29">up work without interruption. It also </div><div class="t m0 x15 h8 y126 ff7 fs7 fc0 sc0 lse wsbb">makes it possible for developers to </div><div class="t m0 x15 h8 y127 ff7 fs7 fc0 sc0 lse wsbc">view each other’s work in CitC work<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y128 ff7 fs7 fc0 sc0 lse wsbd">spaces. Storing all in-progress work in </div><div class="t m0 x15 h8 y129 ff7 fs7 fc0 sc0 lse ws26">the cloud is an important element of </div><div class="t m0 x15 h8 y12a ff7 fs7 fc0 sc0 lse wsbe">the Google workﬂow process. W<span class="_ _0"></span>ork<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y12b ff7 fs7 fc0 sc0 lse wsbf">ing state is thus available to other </div><div class="t m0 x15 h8 y12c ff7 fs7 fc0 sc0 lse ws99">tools, including the cloud-based build </div><div class="t m0 x15 h8 y12d ff7 fs7 fc0 sc0 lse ws40">system, the automated test infrastruc<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y12e ff7 fs7 fc0 sc0 lse wsc0">ture, and the code browsing, editing, </div><div class="t m0 x15 h8 y12f ff7 fs7 fc0 sc0 lse ws2">and review tools. </div><div class="t m0 x31 h2 y130 ff1 fs0 fc5 sc0 ls1 ws2">Figure 4. Piper workﬂow<span class="_ _0"></span>. </div><div class="t m0 x32 h14 y131 fff fse fc0 sc0 ls1 ws2">Sync user </div><div class="t m0 x33 h14 y132 fff fse fc0 sc0 ls1 ws2">workspace </div><div class="t m0 x34 h14 y133 fff fse fc0 sc0 ls1 ws2">to repo</div><div class="t m0 x35 h14 y134 fff fse fc0 sc0 ls1 ws2">Write code</div><div class="t m0 x36 h14 y135 fff fse fc0 sc0 ls1 ws2">Code </div><div class="t m0 x37 h14 y136 fff fse fc0 sc0 ls1 ws2">review</div><div class="t m0 x38 h14 y137 fff fse fc0 sc0 ls1 ws2">Commit</div><div class="t m0 x31 h2 y138 ff1 fs0 fc5 sc0 ls1 ws2">Figure 5. Piper team logo “Piper is Piper expanded recursivel<span class="_ _0"></span>y;” design source: Kirrily </div><div class="t m0 x31 h2 y139 ff1 fs0 fc5 sc0 ls1 ws2">Anderson.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf5" class="pf w0 h0" data-page-no="5"><div class="pc pc5 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg5.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">82<span class="ff2 fs1 ls1 ws1">    <span class="ff1 ls2 ws2">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws3">   <span class="fc1 ws2">|<span class="_ _1"></span></span></span><span class="ff2">  JUL<span class="_ _3"></span>Y 2016  <span class="fc1 ls1">|<span class="_ _2"> </span></span>  V<span class="_ _0"></span>OL. 59  <span class="fc1 ls1">|<span class="_ _1"></span></span>  NO. 7</span></span></span></div><div class="t m0 x1a h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x5 h8 yd8 ff7 fs7 fc0 sc0 ls1 wsc1">When new features are developed, </div><div class="t m0 x6 h8 yd9 ff7 fs7 fc0 sc0 ls1 wsc2">both new and old code paths com<span class="ws2">-</span></div><div class="t m0 x6 h8 yda ff7 fs7 fc0 sc0 ls1 ws2d">monly exist simultaneously, controlled </div><div class="t m0 x6 h8 ydb ff7 fs7 fc0 sc0 ls14 ws46">throug<span class="_ _0"></span>h the use of conditional ﬂags. </div><div class="t m0 x6 h8 ydc ff7 fs7 fc0 sc0 ls14 wsc3">This technique avoids the need for </div><div class="t m0 x6 h8 ydd ff7 fs7 fc0 sc0 ls14 wsc4">a development branch and makes </div><div class="t m0 x6 h8 yde ff7 fs7 fc0 sc0 ls14 wsc5">it easy to turn on and off features </div><div class="t m0 x6 h8 ydf ff7 fs7 fc0 sc0 ls14 wsc6">through conﬁguration updates rather </div><div class="t m0 x6 h8 ye0 ff7 fs7 fc0 sc0 ls14 wsc7">than full binary releases. While some </div><div class="t m0 x6 h8 y111 ff7 fs7 fc0 sc0 ls14 wsc8">additional complexity is incurred for </div><div class="t m0 x6 h8 y112 ff7 fs7 fc0 sc0 ls11 wsc9">de<span class="_ _0"></span>velopers, the merge problems of<span class="_ _0"></span> </div><div class="t m0 x6 h8 y113 ff7 fs7 fc0 sc0 ls11 ws1d">a development branch are avoided. </div><div class="t m0 x6 h8 y114 ff7 fs7 fc0 sc0 ls11 wsca">Flag flips make it much easier and </div><div class="t m0 x6 h8 y115 ff7 fs7 fc0 sc0 ls11 ws3c">faster to switch users off new imple<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y116 ff7 fs7 fc0 sc0 ls11 wscb">mentations that have problems. This </div><div class="t m0 x6 h8 y117 ff7 fs7 fc0 sc0 ls11 wscc">method is typically used in project-</div><div class="t m0 x6 h8 y118 ff7 fs7 fc0 sc0 ls11 wscd">specific code, not common library </div><div class="t m0 x6 h8 y119 ff7 fs7 fc0 sc0 ls11 ws7e">code, and eventually flags are retired<span class="_ _0"></span> </div><div class="t m0 x6 h8 y11a ff7 fs7 fc0 sc0 ls11 wsce">so old code can be deleted. Google </div><div class="t m0 x6 h8 y11b ff7 fs7 fc0 sc0 ls11 wscf">uses a similar approac<span class="_ _3"></span>h <span class="_ _0"></span>fo<span class="_ _0"></span>r <span class="_ _0"></span>ro<span class="_ _0"></span>ut<span class="_ _0"></span><span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y13a ff7 fs7 fc0 sc0 ls1 wsd0">ing live trafﬁc through different code </div><div class="t m0 x6 h8 y13b ff7 fs7 fc0 sc0 ls1 ws28">paths to perform experiments that can </div><div class="t m0 x6 h8 y13c ff7 fs7 fc0 sc0 ls1 wsd1">be tuned in real time through conﬁgu<span class="ws2">-</span></div><div class="t m0 x6 h8 y13d ff7 fs7 fc0 sc0 ls1 wsa0">ration changes. Such A/B experiments </div><div class="t m0 x6 h8 y13e ff7 fs7 fc0 sc0 ls1 wsd2">can measure everything from the per<span class="ws2">-</span></div><div class="t m0 x6 h8 y13f ff7 fs7 fc0 sc0 ls1 wsb7">formance characteristics of the code </div><div class="t m0 x6 h8 y140 ff7 fs7 fc0 sc0 ls1 wsd3">to user engagement related to subtle </div><div class="t m0 x6 h8 y141 ff7 fs7 fc0 sc0 ls1 ws2">product changes. </div><div class="t m0 x5 h8 y142 ffb fs7 fc0 sc0 ls1 ws95">Google workﬂow<span class="_ _3"></span>.<span class="ff7"> Several best prac<span class="ws2">-</span></span></div><div class="t m0 x6 h8 y143 ff7 fs7 fc0 sc0 ls1 wsd4">tices and supporting systems are re<span class="ws2">-</span></div><div class="t m0 x6 h8 y144 ff7 fs7 fc0 sc0 ls1 wsd5">quired to avoid constant breakage in </div><div class="t m0 x6 h8 y145 ff7 fs7 fc0 sc0 ls1 wsbe">the trunk-based development model, </div><div class="t m0 x6 h8 y146 ff7 fs7 fc0 sc0 ls1 ws75">where thousands of engineers commit </div><div class="t m0 x6 h8 y147 ff7 fs7 fc0 sc0 ls1 ws6">thousands of changes to the repository </div><div class="t m0 x6 h8 y148 ff7 fs7 fc0 sc0 ls1 wsd6">on a daily basis. For instance, Google </div><div class="t m0 x6 h8 y149 ff7 fs7 fc0 sc0 ls1 ws7d">has an automated testing infrastruc<span class="ws2">-</span></div><div class="t m0 x6 h8 y14a ff7 fs7 fc0 sc0 ls1 wsd7">ture that initiates a rebuild of all af<span class="ws2">-</span></div><div class="t m0 x6 h8 y14b ff7 fs7 fc0 sc0 ls1 ws15">fected dependencies on almost every </div><div class="t m0 x6 h8 y14c ff7 fs7 fc0 sc0 ls1 wsd8">change committed to the repository<span class="_ _3"></span>. </div><div class="t m0 x6 h8 y14d ff7 fs7 fc0 sc0 ls1 wsd9">If a change creates widespread build </div><div class="t m0 x6 h8 y14e ff7 fs7 fc0 sc0 ls1 ws13">breakage, a system is in place to auto<span class="ws2">-</span></div><div class="t m0 x6 h8 y14f ff7 fs7 fc0 sc0 ls1 wsda">matically undo the change. To reduce </div><div class="t m0 x6 h8 y150 ff7 fs7 fc0 sc0 ls1 wsdb">the incidence of bad code being com<span class="ws2">-</span></div><div class="t m0 x6 h8 y151 ff7 fs7 fc0 sc0 ls1 wsdc">mitted in the ﬁrst place, the highly </div><div class="t m0 x6 h8 y152 ff7 fs7 fc0 sc0 ls1 wsdd">customizable Google “presubmit” in<span class="ws2">-</span></div><div class="t m0 x6 h8 y153 ff7 fs7 fc0 sc0 ls1 wse">frastructure provides automated test<span class="ws2">-</span></div><div class="t m0 x6 h8 y154 ff7 fs7 fc0 sc0 ls1 wsde">ing and analysis of changes before </div><div class="t m0 x6 h8 y155 ff7 fs7 fc0 sc0 ls1 ws99">they are added to the codebase. A set of </div><div class="t m0 x6 h8 y156 ff7 fs7 fc0 sc0 ls1 wsdf">global presubmit analyses are run for </div><div class="t m0 x6 h8 y157 ff7 fs7 fc0 sc0 ls1 wse0">all changes, and code owners can cre<span class="ws2">-</span></div><div class="t m0 x6 h8 y158 ff7 fs7 fc0 sc0 ls1 wse1">ate custom analyses that run only on </div><div class="t m0 x6 h8 y159 ff7 fs7 fc0 sc0 ls1 wse2">directories within the codebase they </div><div class="t m0 x6 h8 y15a ff7 fs7 fc0 sc0 ls1 wse3">specify<span class="_ _3"></span>. A small set of very low-level </div><div class="t m0 x6 h8 y15b ff7 fs7 fc0 sc0 ls1 ws45">core libraries uses a mechanism simi<span class="ws2">-</span></div><div class="t m0 x6 h8 y15c ff7 fs7 fc0 sc0 ls1 wse4">lar to a development branch to enforce </div><div class="t m0 x6 h8 y15d ff7 fs7 fc0 sc0 ls1 wsa3">additional testing before new versions </div><div class="t m0 x6 h8 y15e ff7 fs7 fc0 sc0 ls1 ws2">are exposed to client code. </div><div class="t m0 x5 h8 y15f ff7 fs7 fc0 sc0 ls18 ws62">An important aspect of Google cul<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y160 ff7 fs7 fc0 sc0 ls18 wse4">ture that encourages code quality is the </div><div class="t m0 x6 h8 y161 ff7 fs7 fc0 sc0 ls18 wse5">expectation that all code is reviewed </div><div class="t m0 x1 h8 y162 ff7 fs7 fc0 sc0 ls14 wse6">a comment). Then, without leaving </div><div class="t m0 x1 h8 y163 ff7 fs7 fc0 sc0 ls14 wsa0">the code browser, they can send their </div><div class="t m0 x1 h8 y164 ff7 fs7 fc0 sc0 ls14 ws50">changes out to the appropriate review<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y165 ff7 fs7 fc0 sc0 ls14 ws2">ers with auto-commit enabled. </div><div class="t m0 x29 h8 y166 ff7 fs7 fc0 sc0 ls1 ws2b">Piper can also be used without CitC. </div><div class="t m0 x1 h8 y167 ff7 fs7 fc0 sc0 ls1 ws3f">Developers can instead store Piper </div><div class="t m0 x1 h8 y168 ff7 fs7 fc0 sc0 ls1 wsc9">workspaces on their local machines. </div><div class="t m0 x1 h8 y169 ff7 fs7 fc0 sc0 ls1 wsb0">Piper also has limited interoperability </div><div class="t m0 x1 h8 y16a ff7 fs7 fc0 sc0 ls1 wse7">with Git. Over 80% of Piper users today </div><div class="t m0 x1 h8 y16b ff7 fs7 fc0 sc0 ls1 ws92">use CitC, with adoption continuing to </div><div class="t m0 x1 h8 y16c ff7 fs7 fc0 sc0 ls1 wsb5">grow due to the many beneﬁts provid<span class="ws2">-</span></div><div class="t m0 x1 h8 y16d ff7 fs7 fc0 sc0 ls1 ws2">ed by CitC. </div><div class="t m0 x29 h8 y16e ff7 fs7 fc0 sc0 ls1 wse8">Piper and CitC make working pro<span class="ws2">-</span></div><div class="t m0 x1 h8 y16f ff7 fs7 fc0 sc0 ls1 wse9">ductively with a single, monolithic </div><div class="t m0 x1 h8 y170 ff7 fs7 fc0 sc0 ls1 wsb5">source repository possible at the scale </div><div class="t m0 x1 h8 y171 ff7 fs7 fc0 sc0 ls1 ws87">of the Google codebase. The design </div><div class="t m0 x1 h8 y172 ff7 fs7 fc0 sc0 ls1 ws7">and architecture of these systems were </div><div class="t m0 x1 h8 y173 ff7 fs7 fc0 sc0 ls1 wsc1">both heavily inﬂuenced by the trunk-</div><div class="t m0 x1 h8 y174 ff7 fs7 fc0 sc0 ls1 wsea">based development paradigm em<span class="ws2">-</span></div><div class="t m0 x1 h8 y175 ff7 fs7 fc0 sc0 ls1 ws2">ployed at Google, as described here. </div><div class="t m0 x29 h8 y176 ffb fs7 fc0 sc0 ls1 wseb">Trunk-based development. <span class="ff7 ws2">Google </span></div><div class="t m0 x1 h8 y177 ff7 fs7 fc0 sc0 ls1 wsec">practices trunk-based development on </div><div class="t m0 x1 h8 y178 ff7 fs7 fc0 sc0 ls1 ws3e">top of the Piper source repository<span class="_ _3"></span>. The </div><div class="t m0 x1 h8 y179 ff7 fs7 fc0 sc0 ls1 wsed">vast majority of Piper users work at the </div><div class="t m0 x1 h8 y17a ff7 fs7 fc0 sc0 ls1 wsee">“head,” or most recent, version of a </div><div class="t m0 x1 h8 y17b ff7 fs7 fc0 sc0 ls1 wsef">single copy of the code called “trunk” </div><div class="t m0 x1 h8 y17c ff7 fs7 fc0 sc0 ls1 wsb3">or “mainline.” Changes are made to </div><div class="t m0 x1 h8 y17d ff7 fs7 fc0 sc0 ls1 ws96">the repository in a single, serial order<span class="ws2">-</span></div><div class="t m0 x1 h8 y17e ff7 fs7 fc0 sc0 ls1 wsf0">ing. The combination of trunk-based </div><div class="t m0 x1 h8 y17f ff7 fs7 fc0 sc0 ls1 wsf1">development with a central repository </div><div class="t m0 x1 h8 y180 ff7 fs7 fc0 sc0 ls1 wsb6">deﬁnes the monolithic codebase mod<span class="ws2">-</span></div><div class="t m0 x1 h8 y181 ff7 fs7 fc0 sc0 ls1 wsf2">el. Immediately after any commit, the </div><div class="t m0 x1 h8 y182 ff7 fs7 fc0 sc0 ls1 wsf3">new code is visible to, and usable by, </div><div class="t m0 x1 h8 y183 ff7 fs7 fc0 sc0 ls1 ws7c">all other developers. The fact that Piper </div><div class="t m0 x1 h8 y184 ff7 fs7 fc0 sc0 ls1 wsf4">users work on a single consistent view </div><div class="t m0 x1 h8 y185 ff7 fs7 fc0 sc0 ls1 wsac">of the Google codebase is key for pro<span class="ws2">-</span></div><div class="t m0 x1 h8 y186 ff7 fs7 fc0 sc0 ls1 wsf5">viding the advantages described later </div><div class="t m0 x1 h8 y187 ff7 fs7 fc0 sc0 ls1 ws2">in this article. </div><div class="t m0 x29 h8 y188 ff7 fs7 fc0 sc0 ls1 wsb">Trunk-based development is beneﬁ<span class="ws2">-</span></div><div class="t m0 x1 h8 y189 ff7 fs7 fc0 sc0 ls14 wsf6">cial in part because it avoids the pain<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y18a ff7 fs7 fc0 sc0 ls14 ws65">ful merges that often occur when it is </div><div class="t m0 x1 h8 y18b ff7 fs7 fc0 sc0 ls14 wsf7">time to reconcile long-lived branches. </div><div class="t m0 x1 h8 y18c ff7 fs7 fc0 sc0 ls14 wsf8">Development on branches is unusual </div><div class="t m0 x1 h8 y18d ff7 fs7 fc0 sc0 ls14 wsf9">and not well supported at Google, </div><div class="t m0 x1 h8 y18e ff7 fs7 fc0 sc0 ls14 ws4a">though branches are typically used </div><div class="t m0 x1 h8 y18f ff7 fs7 fc0 sc0 ls14 wse0">for releases. Release branches are cut </div><div class="t m0 x1 h8 y190 ff7 fs7 fc0 sc0 ls14 wsef">from a speciﬁc revision of the reposi<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y191 ff7 fs7 fc0 sc0 ls14 ws28">tory<span class="_ _3"></span>. Bug ﬁxes and enhancements that </div><div class="t m0 x1 h8 y192 ff7 fs7 fc0 sc0 ls14 wsab">must be added to a release are typically </div><div class="t m0 x1 h8 y193 ff7 fs7 fc0 sc0 ls14 ws1b">developed on mainline, then cherry-</div><div class="t m0 x1 h8 y194 ff7 fs7 fc0 sc0 ls14 wsfa">picked into the release branch (see </div><div class="t m0 x1 h8 y195 ff7 fs7 fc0 sc0 ls14 ws4f">Figure 6). Due to the need to maintain </div><div class="t m0 x1 h8 y196 ff7 fs7 fc0 sc0 ls14 wsfb">stability and limit churn on the release </div><div class="t m0 x1 h8 y197 ff7 fs7 fc0 sc0 ls14 wsba">branch, a release is typically a snap<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y198 ff7 fs7 fc0 sc0 ls14 wsc1">shot of head, with an optional small </div><div class="t m0 x1 h8 y199 ff7 fs7 fc0 sc0 ls14 ws79">number of cherry-picks pulled in from </div><div class="t m0 x1 h8 y19a ff7 fs7 fc0 sc0 ls1 wsfc">head as<span class="_ _1"></span> needed. Use of long-lived </div><div class="t m0 x1 h8 y19b ff7 fs7 fc0 sc0 ls1 wsfd">branches with parallel development </div><div class="t m0 x1 h8 y19c ff7 fs7 fc0 sc0 ls1 ws90">on the branch and mainline is exceed<span class="ws2">-</span></div><div class="t m0 x1 h8 y19d ff7 fs7 fc0 sc0 ls1 ws2">ingly rare. </div><div class="t m0 x39 h15 y19e ff1 fsf fc3 sc0 ls19 ws2">Piper and CitC<span class="_ _2"></span> </div><div class="t m0 x39 h15 y19f ff1 fsf fc3 sc0 ls19 ws2">make working<span class="_ _2"></span> </div><div class="t m0 x39 h15 y1a0 ff1 fsf fc3 sc0 ls19 wsfe">productivel<span class="_ _5"></span>y<span class="_ _2"></span> <span class="_ _1d"></span><span class="ls1 ws2"> </span></div><div class="t m0 x39 h15 y1a1 ff1 fsf fc3 sc0 ls19 ws2">with a single,<span class="_ _2"></span> </div><div class="t m0 x39 h15 y1a2 ff1 fsf fc3 sc0 ls19 ws2">monolithic source<span class="_ _2"></span> </div><div class="t m0 x39 h15 y1a3 ff1 fsf fc3 sc0 ls19 ws2">repositor<span class="_ _1"></span>y possible<span class="_ _2"></span> </div><div class="t m0 x39 h15 y1a4 ff1 fsf fc3 sc0 ls19 ws2">at the scale of the<span class="_ _2"></span> </div><div class="t m0 x39 h15 y1a5 ff1 fsf fc3 sc0 ls19 ws2">Google codebase.<span class="_ _2"></span> </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf6" class="pf w0 h0" data-page-no="6"><div class="pc pc6 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg6.png"/><div class="t m0 xe h2 y1 ff2 fs1 fc0 sc0 ls2 ws2">JUL<span class="_ _3"></span>Y 2016  |  VOL. 59  |  NO. 7  <span class="fc1 ls1">|<span class="_ _1"></span><span class="fc0 ws3">  </span></span><span class="ff1">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws1">    </span><span class="fs0 ls0 ws0">83</span></span></div><div class="t m0 x2c h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x4 h8 yd8 ff7 fs7 fc0 sc0 ls18 wsc0">before being committed to the reposi<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 yd9 ff7 fs7 fc0 sc0 lse ws94">to<span class="_ _0"></span>ry<span class="_ _3"></span>. M<span class="_ _0"></span>ost developers can view and </div><div class="t m0 x4 h8 yda ff7 fs7 fc0 sc0 ls9 ws71">pro<span class="_ _0"></span>pose <span class="_ _0"></span>changes to files anywhere<span class="_ _0"></span> </div><div class="t m0 x4 h8 ydb ff7 fs7 fc0 sc0 ls9 wsff">across the entire codebase—with the </div><div class="t m0 x4 h8 ydc ff7 fs7 fc0 sc0 ls9 ws100">exception of a small set of highly con<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 ydd ff7 fs7 fc0 sc0 ls9 ws101">fidential code that is more carefully </div><div class="t m0 x4 h8 yde ff7 fs7 fc0 sc0 ls9 ws42">controlled. The risk associated with </div><div class="t m0 x4 h8 ydf ff7 fs7 fc0 sc0 ls1a wsf3">de<span class="_ _3"></span>velopers changing code they are<span class="_ _0"></span> </div><div class="t m0 x4 h8 ye0 ff7 fs7 fc0 sc0 ls12 ws102">not deeply familiar with is mitigated<span class="_ _0"></span> </div><div class="t m0 x4 h8 y111 ff7 fs7 fc0 sc0 ls12 wsb2">through the code-review process and<span class="_ _0"></span> </div><div class="t m0 x4 h8 y112 ff7 fs7 fc0 sc0 ls12 wsb5">the concept of code ownership. The<span class="_ _0"></span> </div><div class="t m0 x4 h8 y113 ff7 fs7 fc0 sc0 ls12 ws103">Google codebase is laid out in a tree<span class="_ _0"></span> </div><div class="t m0 x4 h8 y114 ff7 fs7 fc0 sc0 ls10 ws104">st<span class="_ _1"></span>ructure. Each and every directory </div><div class="t m0 x4 h8 y115 ff7 fs7 fc0 sc0 ls18 wsa9">has<span class="_ _1"></span> a set o<span class="_ _1"></span>f owners who control <span class="_ _0"></span>wheth<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y116 ff7 fs7 fc0 sc0 ls10 ws105">er<span class="_ _0"></span> a<span class="_ _0"></span> c<span class="_ _0"></span>han<span class="_ _0"></span>ge<span class="_ _0"></span> t<span class="_ _0"></span>o ﬁles in their directory </div><div class="t m0 x4 h8 y117 ff7 fs7 fc0 sc0 ls18 wsef">wi<span class="_ _1"></span>ll<span class="_ _1"></span> b<span class="_ _1"></span>e a<span class="_ _1"></span>cc<span class="_ _1"></span>epted. Owners are typ<span class="_ _1"></span>ica<span class="_ _1"></span>lly </div><div class="t m0 x4 h8 y118 ff7 fs7 fc0 sc0 ls15 ws68">the developers<span class="_ _0"></span> who work on the proj<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y119 ff7 fs7 fc0 sc0 lse wsaa">e<span class="_ _0"></span>ct<span class="_ _0"></span>s<span class="_ _0"></span> in the directories in question. A </div><div class="t m0 x4 h8 y11a ff7 fs7 fc0 sc0 ls10 wsff">change often receives a detailed code </div><div class="t m0 x4 h8 y11b ff7 fs7 fc0 sc0 ls10 ws78">review from one developer, evaluating </div><div class="t m0 x4 h8 y13a ff7 fs7 fc0 sc0 ls18 ws106">th<span class="_ _1"></span>e <span class="_ _1"></span>qu<span class="_ _1"></span>ali<span class="_ _1"></span>ty<span class="_ _1"></span> o<span class="_ _1"></span>f the change, and a com<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y13b ff7 fs7 fc0 sc0 ls18 ws100">mit approval from an owner, evaluating </div><div class="t m0 x4 h8 y13c ff7 fs7 fc0 sc0 ls18 ws63">the appropriateness of the <span class="_ _1"></span>cha<span class="_ _1"></span>nge<span class="_ _1"></span> to </div><div class="t m0 x4 h8 y13d ff7 fs7 fc0 sc0 ls18 ws2">th<span class="_ _1"></span>eir<span class="_ _1"></span> area of the codebase. </div><div class="t m0 x10 h8 y13e ff7 fs7 fc0 sc0 ls1 ws107">Code reviewers comment on as<span class="ws2">-</span></div><div class="t m0 x4 h8 y13f ff7 fs7 fc0 sc0 ls1 ws108">pects of code quality, including de<span class="ws2">-</span></div><div class="t m0 x4 h8 y140 ff7 fs7 fc0 sc0 ls1 wsb2">sign, functionality, complexity, testing, </div><div class="t m0 x4 h8 y141 ff7 fs7 fc0 sc0 ls1 ws109">naming, comment quality, and code </div><div class="t m0 x4 h8 y142 ff7 fs7 fc0 sc0 ls1 ws10a">style, as documented by the various </div><div class="t m0 x4 h8 y143 ff7 fs7 fc0 sc0 ls1 ws18">language-speciﬁc Google style guides.</div><div class="t m0 x3a ha y1a6 ff7 fs8 fc0 sc0 ls1 ws2">e</div><div class="t m0 x3b h8 y1a7 ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x4 h8 y1a8 ff7 fs7 fc0 sc0 ls1 ws10b">Google has written a code-review tool </div><div class="t m0 x4 h8 y1a9 ff7 fs7 fc0 sc0 ls1 wsbd">called Critique that allows the reviewer </div><div class="t m0 x4 h8 y1aa ff7 fs7 fc0 sc0 ls1 ws10c">to view the evolution of the code and </div><div class="t m0 x4 h8 y1ab ff7 fs7 fc0 sc0 ls1 ws15">comment on any line of the change. </div><div class="t m0 x4 h8 y1ac ff7 fs7 fc0 sc0 ls1 ws10d">It encourages further revisions and a </div><div class="t m0 x4 h8 y1ad ff7 fs7 fc0 sc0 ls1 ws10e">conversation leading to a ﬁnal “Looks </div><div class="t m0 x4 h8 y1ae ff7 fs7 fc0 sc0 ls1 ws4c">Good To Me” from the reviewer, indi<span class="ws2">-</span></div><div class="t m0 x4 h8 y1af ff7 fs7 fc0 sc0 ls1 ws2">cating the review is complete. </div><div class="t m0 x10 h8 y1b0 ff7 fs7 fc0 sc0 ls1 ws10f">Google’s static analysis system (Tri<span class="ws2">-</span></div><div class="t m0 x4 h8 y1b1 ff7 fs7 fc0 sc0 ls1 ws2">corder</div><div class="t m0 x23 ha ya5 ff7 fs8 fc0 sc0 ls1 ws2">10</div><div class="t m0 x3c h8 ya6 ff7 fs7 fc0 sc0 ls1 ws75">) and presubmit infrastructure </div><div class="t m0 x4 h8 ya7 ff7 fs7 fc0 sc0 ls1 wsa0">also provide data on code quality, test </div><div class="t m0 x4 h8 y1b2 ff7 fs7 fc0 sc0 ls1 ws110">coverage, and test results automatical<span class="ws2">-</span></div><div class="t m0 x4 h8 y1b3 ff7 fs7 fc0 sc0 ls1 ws111">ly in the Google code-review tool. These </div><div class="t m0 x4 h8 y1b4 ff7 fs7 fc0 sc0 ls1 ws112">computationally intensive checks are </div><div class="t m0 x4 h8 y1b5 ff7 fs7 fc0 sc0 ls1 ws95">triggered periodically, as well as when </div><div class="t m0 x4 h8 y1b6 ff7 fs7 fc0 sc0 ls1 wsf5">a code change is sent for review<span class="_ _3"></span>. Tri<span class="ws2">-</span></div><div class="t m0 x4 h8 y1b7 ff7 fs7 fc0 sc0 ls1 ws113">corder also provides suggested ﬁxes </div><div class="t m0 x4 h8 y1b8 ff7 fs7 fc0 sc0 ls1 wsd9">with one-click code editing for many </div><div class="t m0 x4 h8 y1b9 ff7 fs7 fc0 sc0 ls1 ws114">errors. These systems provide impor<span class="ws2">-</span></div><div class="t m0 x4 h8 y1ba ff7 fs7 fc0 sc0 ls1 wsef">tant data to increase the effectiveness </div><div class="t m0 x4 h8 y1bb ff7 fs7 fc0 sc0 ls1 wsd5">of code reviews and keep the Google </div><div class="t m0 x4 h8 y1bc ff7 fs7 fc0 sc0 ls1 ws2">codebase healthy<span class="_ _3"></span>. </div><div class="t m0 x10 h8 y1bd ff7 fs7 fc0 sc0 ls14 wsd8">A team of Google developers will </div><div class="t m0 x4 h8 y1be ff7 fs7 fc0 sc0 ls14 ws39">occasionally undertake a set of wide-</div><div class="t m0 x4 h8 y1bf ff7 fs7 fc0 sc0 ls14 ws5c">reaching code-cleanup changes to fur<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y1c0 ff7 fs7 fc0 sc0 ls14 ws115">ther maintain the health of the code-</div><div class="t m0 x4 h8 y1c1 ff7 fs7 fc0 sc0 ls14 ws116">base. The developers who perform </div><div class="t m0 x4 h8 y1c2 ff7 fs7 fc0 sc0 ls14 ws117">these changes commonly separate </div><div class="t m0 x4 hb y54 ff7 fs0 fc0 sc0 ls1 ws118">e https://github.com/google/styleguide</div><div class="t m0 x18 h8 yd8 ff7 fs7 fc0 sc0 ls10 wsf8">performing large-scale code changes </div><div class="t m0 x18 h8 yd9 ff7 fs7 fc0 sc0 ls10 ws119">at Google. Using Rosie is balanced<span class="_ _0"></span> </div><div class="t m0 x18 h8 yda ff7 fs7 fc0 sc0 ls9 wsd8">against the cost incurred by teams<span class="_ _0"></span> </div><div class="t m0 x18 h8 ydb ff7 fs7 fc0 sc0 ls9 ws25">needing to review the ongoing stream </div><div class="t m0 x18 h8 ydc ff7 fs7 fc0 sc0 ls9 wsb3">of simple changes Rosie generates.<span class="_ _0"></span> </div><div class="t m0 x18 h8 ydd ff7 fs7 fc0 sc0 ls9 ws11a">As Rosie’s popularity and usage grew,<span class="_ _0"></span> </div><div class="t m0 x18 h8 yde ff7 fs7 fc0 sc0 ls9 wsa5">it became clear some control had to </div><div class="t m0 x18 h8 ydf ff7 fs7 fc0 sc0 ls9 ws11b">be established to limit Rosie’s use<span class="_ _0"></span> </div><div class="t m0 x18 h8 ye0 ff7 fs7 fc0 sc0 ls9 wsc">to high-value changes that would be </div><div class="t m0 x18 h8 y111 ff7 fs7 fc0 sc0 ls9 ws11c">distributed to many reviewers, rather </div><div class="t m0 x18 h8 y112 ff7 fs7 fc0 sc0 ls9 wsef">than to single atomic changes or re<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y113 ff7 fs7 fc0 sc0 ls9 ws11d">jected. In 2013, Google adopted a for<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y114 ff7 fs7 fc0 sc0 ls9 wsb9">mal large-scale change-review proc<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y115 ff7 fs7 fc0 sc0 ls14 ws11e">es<span class="_ _1"></span>s that led to a decrease in the number </div><div class="t m0 x18 h8 y116 ff7 fs7 fc0 sc0 ls14 ws11f">of commits through Rosie from 2013 </div><div class="t m0 x18 h8 y117 ff7 fs7 fc0 sc0 ls14 wsf4">to 2014. In evaluating a Rosie change, </div><div class="t m0 x18 h8 y118 ff7 fs7 fc0 sc0 ls14 ws120">the review committee balances<span class="_ _0"></span> the </div><div class="t m0 x18 h8 y119 ff7 fs7 fc0 sc0 ls1 ws9d">beneﬁt of the change against the costs </div><div class="t m0 x18 h8 y11a ff7 fs7 fc0 sc0 ls1 ws121">of reviewer time and repository churn. </div><div class="t m0 x18 h8 y11b ff7 fs7 fc0 sc0 ls10 ws122">W<span class="_ _0"></span>e later examine this and similar </div><div class="t m0 x18 h8 y13a ff7 fs7 fc0 sc0 ls10 ws2">trade-offs more closely<span class="_ _3"></span>. </div><div class="t m0 x19 h8 y13b ff7 fs7 fc0 sc0 ls11 ws112">In sum, Google has developed a </div><div class="t m0 x18 h8 y13c ff7 fs7 fc0 sc0 ls11 ws25">number of practices and tools to sup<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y13d ff7 fs7 fc0 sc0 ls11 ws105">port its enormous monolithic code<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y13e ff7 fs7 fc0 sc0 ls11 ws8">base, including trunk-based devel<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y13f ff7 fs7 fc0 sc0 ls11 ws8b">opment, the distributed source-code </div><div class="t m0 x18 h8 y140 ff7 fs7 fc0 sc0 ls11 ws123">repository Piper, the workspace cli<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y141 ff7 fs7 fc0 sc0 ls11 ws124">ent CitC, and workflow-support-tools </div><div class="t m0 x18 h8 y142 ff7 fs7 fc0 sc0 ls11 wsfb">Critique, CodeSearch, Tricorder, and </div><div class="t m0 x18 h8 y143 ff7 fs7 fc0 sc0 ls11 ws125">Rosie. W<span class="_ _3"></span>e discuss the pros and cons </div><div class="t m0 x18 h8 y144 ff7 fs7 fc0 sc0 ls11 ws2">of this model here. </div><div class="t m0 x15 h8 y1c3 ff7 fs7 fc0 sc0 ls14 wsd7">them into two phases. With this ap<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y1c4 ff7 fs7 fc0 sc0 ls14 wsce">proach, a large backward-compatible </div><div class="t m0 x15 h8 y1c5 ff7 fs7 fc0 sc0 lse wsc6">change is made ﬁrst. Once it is com<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y1c6 ff7 fs7 fc0 sc0 lse ws126">plete, a second smaller change can </div><div class="t m0 x15 h8 y1c7 ff7 fs7 fc0 sc0 ls9 ws27">be <span class="_ _0"></span>made to remove the original pat<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y1c8 ff7 fs7 fc0 sc0 ls9 ws127">tern that is no longer referenced. A </div><div class="t m0 x15 h8 y1c9 ff7 fs7 fc0 sc0 ls9 ws78">Google tool called Rosie</div><div class="t m0 x3d ha y1ca ff7 fs8 fc0 sc0 ls1 ws2">f</div><div class="t m0 x35 h8 y13 ff7 fs7 fc0 sc0 ls9 ws78"> supports the </div><div class="t m0 x15 h8 y14 ff7 fs7 fc0 sc0 ls9 wse0">first phase of such large-scale clean<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y15 ff7 fs7 fc0 sc0 ls9 ws112">ups and code changes. With Rosie,<span class="_ _0"></span> </div><div class="t m0 x15 h8 y16 ff7 fs7 fc0 sc0 ls9 wsd4">developers create a large patch, ei<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y17 ff7 fs7 fc0 sc0 ls9 wsd7">ther through a find-and-replace op<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y18 ff7 fs7 fc0 sc0 ls1b ws128">er<span class="_ _0"></span>ati<span class="_ _0"></span>on <span class="_ _0"></span>acr<span class="_ _0"></span>oss the entire repository<span class="_ _0"></span> </div><div class="t m0 x15 h8 y19 ff7 fs7 fc0 sc0 ls1b wsc1">or through more complex refact<span class="_ _0"></span>or<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y1a ff7 fs7 fc0 sc0 ls12 ws129">ing tools. Rosie then takes care of<span class="_ _0"></span> </div><div class="t m0 x15 h8 y1b ff7 fs7 fc0 sc0 ls9 ws9d">spl<span class="_ _1"></span>itting the large patch into smaller </div><div class="t m0 x15 h8 y1c ff7 fs7 fc0 sc0 ls9 wsfb">patches, testing them independently, </div><div class="t m0 x15 h8 y1d ff7 fs7 fc0 sc0 ls11 ws9a">sending them out for code review, </div><div class="t m0 x15 h8 y1e ff7 fs7 fc0 sc0 ls11 ws12a">and committing them automati<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y1f ff7 fs7 fc0 sc0 ls11 wsf6">cally once they pass tests and a code<span class="_ _0"></span> </div><div class="t m0 x15 h8 y20 ff7 fs7 fc0 sc0 ls11 ws12b">review<span class="_ _3"></span>. Rosie splits patches along </div><div class="t m0 x15 h8 y21 ff7 fs7 fc0 sc0 ls11 ws12c">project directory lines, relying on the </div><div class="t m0 x15 h8 y22 ff7 fs7 fc0 sc0 lse ws12d">co<span class="_ _1"></span>de-ownership hierarchy described </div><div class="t m0 x15 h8 y23 ff7 fs7 fc0 sc0 lse ws12e">earlier to send patches to the app<span class="_ _0"></span>ro<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y24 ff7 fs7 fc0 sc0 ls14 ws2">priate reviewers. </div><div class="t m0 x16 h8 y25 ff7 fs7 fc0 sc0 ls10 ws12f">Figure 7 reports the number of </div><div class="t m0 x15 h8 y26 ff7 fs7 fc0 sc0 ls10 ws130">changes committed through Rosie<span class="_ _0"></span> </div><div class="t m0 x15 h8 y1cb ff7 fs7 fc0 sc0 ls10 ws119">on a monthly basis, demonstrating </div><div class="t m0 x15 h8 y1cc ff7 fs7 fc0 sc0 ls10 wsb0">the importance of Rosie as a tool for<span class="_ _0"></span> </div><div class="t m0 x15 hb y1cd ff7 fs0 fc0 sc0 ls1 ws131">f <span class="_ _17"> </span>The project name was inspired by Rosie the ro<span class="ws2">-</span></div><div class="t m0 x17 hb y1ce ff7 fs0 fc0 sc0 ls1 ws2">bot maid from the TV series “The Jetsons.”</div><div class="t m0 x31 h2 y1cf ff1 fs0 fc5 sc0 ls1 ws2">Figure 6. Release branching model. </div><div class="t m0 x3e h16 y1d0 ff10 fs10 fc0 sc0 ls1 ws2">T<span class="_ _0"></span>runk/Mainline</div><div class="t m0 x3f h16 y1d1 ff10 fs10 fc0 sc0 ls1 ws2">Cherry-pick</div><div class="t m0 x40 h16 y1d2 ff10 fs10 fc0 sc0 ls1 ws2">Release branch</div><div class="t m0 x31 h2 y1d3 ff1 fs0 fc5 sc0 ls1 ws2">Figure 7. Rosie commits per month. </div><div class="t m0 x41 h12 y1d4 ff11 fs3 fc0 sc0 ls1 ws2">Jan. 2011<span class="_ _1e"> </span>Jan. 2012<span class="_ _1e"> </span>Jan. 2013<span class="_ _1f"> </span>Jan. 2014<span class="_ _1f"> </span>Jan. 2015</div><div class="t m0 x42 h12 y1d5 ff11 fs3 fc0 sc0 ls1 ws2">5,000</div><div class="t m0 x17 h12 y1d6 ff11 fs3 fc0 sc0 ls1 ws2">10,000</div><div class="t m0 x17 h12 y1d7 ff11 fs3 fc0 sc0 ls1 ws2">15,000</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf7" class="pf w0 h0" data-page-no="7"><div class="pc pc7 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg7.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">84<span class="ff2 fs1 ls1 ws1">    <span class="ff1 ls2 ws2">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws3">   <span class="fc1 ws2">|<span class="_ _1"></span></span></span><span class="ff2">  JUL<span class="_ _3"></span>Y 2016  <span class="fc1 ls1">|<span class="_ _2"> </span></span>  V<span class="_ _0"></span>OL. 59  <span class="fc1 ls1">|<span class="_ _1"></span></span>  NO. 7</span></span></span></div><div class="t m0 x1a h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x6 h8 yd8 ff7 fs7 fc0 sc0 lse ws132">bin<span class="_ _0"></span>ar<span class="_ _0"></span>y <span class="_ _0"></span>problem is avoided through use </div><div class="t m0 x6 h8 yd9 ff7 fs7 fc0 sc0 lse ws2">of static linking. </div><div class="t m0 x5 h8 yda ff7 fs7 fc0 sc0 lse ws133">The ability to make atomic changes </div><div class="t m0 x6 h8 ydb ff7 fs7 fc0 sc0 lse ws101">is also a very powerful feature of the </div><div class="t m0 x6 h8 ydc ff7 fs7 fc0 sc0 lse ws134">monolithic model. A developer can </div><div class="t m0 x6 h8 ydd ff7 fs7 fc0 sc0 lse wse8">make a major change touching hun<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 yde ff7 fs7 fc0 sc0 lse ws3c">dreds or thousands of ﬁles across the </div><div class="t m0 x6 h8 ydf ff7 fs7 fc0 sc0 lse ws1e">repository in a single consistent op<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 ye0 ff7 fs7 fc0 sc0 lse ws17">eration. For instance, a developer can<span class="_ _0"></span> </div><div class="t m0 x6 h8 y111 ff7 fs7 fc0 sc0 lse ws90">rename a class or function in a single </div><div class="t m0 x6 h8 y112 ff7 fs7 fc0 sc0 lse ws11">commit and yet not break any builds </div><div class="t m0 x6 h8 y113 ff7 fs7 fc0 sc0 lse ws2">or tests. </div><div class="t m0 x5 h8 y114 ff7 fs7 fc0 sc0 ls18 ws109">The availability of all source code </div><div class="t m0 x6 h8 y115 ff7 fs7 fc0 sc0 ls18 ws12e">in a single repository, or at least on a </div><div class="t m0 x6 h8 y116 ff7 fs7 fc0 sc0 ls18 ws135">centralized server, makes it easier for </div><div class="t m0 x6 h8 y117 ff7 fs7 fc0 sc0 ls18 wse4">the maintainers of core libraries to per<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y118 ff7 fs7 fc0 sc0 ls18 wsa6">form testing and performance bench<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y119 ff7 fs7 fc0 sc0 ls18 ws136">marking for high-impact changes be<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y11a ff7 fs7 fc0 sc0 ls18 wsb2">fore they are committed. This approach </div><div class="t m0 x6 h8 y11b ff7 fs7 fc0 sc0 ls18 ws137">is useful for exploring and measuring </div><div class="t m0 x6 h8 y13a ff7 fs7 fc0 sc0 ls18 ws138">the value of highly disruptive changes. </div><div class="t m0 x6 h8 y13b ff7 fs7 fc0 sc0 ls18 ws5">One concrete example is an experiment </div><div class="t m0 x6 h8 y13c ff7 fs7 fc0 sc0 ls18 ws121">to evaluate the feasibility of converting </div><div class="t m0 x6 h8 y13d ff7 fs7 fc0 sc0 ls18 ws139">Google data centers to support non-x86 </div><div class="t m0 x6 h8 y13e ff7 fs7 fc0 sc0 ls18 ws2">machine architectures. </div><div class="t m0 x5 h8 y13f ff7 fs7 fc0 sc0 ls10 ws13a">With the monolithic structure of </div><div class="t m0 x6 h8 y140 ff7 fs7 fc0 sc0 ls10 ws13b">the Google repository, a developer </div><div class="t m0 x6 h8 y141 ff7 fs7 fc0 sc0 ls10 ws13c">never has to decide where the reposi<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y142 ff7 fs7 fc0 sc0 ls10 wsaa">tory boundaries lie. Engineers never </div><div class="t m0 x6 h8 y143 ff7 fs7 fc0 sc0 ls10 ws13d">need to “fork” the development of </div><div class="t m0 x6 h8 y144 ff7 fs7 fc0 sc0 ls10 wsca">a shared library or merge across re<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y145 ff7 fs7 fc0 sc0 ls10 ws13e">positories to update copied versions </div><div class="t m0 x6 h8 y146 ff7 fs7 fc0 sc0 ls10 ws114">of code. Team boundaries are ﬂuid.<span class="_ _0"></span> </div><div class="t m0 x6 h8 y147 ff7 fs7 fc0 sc0 ls10 ws13f">When project ownership changes or </div><div class="t m0 x6 h8 y148 ff7 fs7 fc0 sc0 ls10 ws140">plans are made to consolidate sys<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y149 ff7 fs7 fc0 sc0 ls10 ws11">tems, all code is already in the same </div><div class="t m0 x6 h8 y14a ff7 fs7 fc0 sc0 ls10 ws141">repository<span class="_ _3"></span>. This environment makes </div><div class="t m0 x6 h8 y14b ff7 fs7 fc0 sc0 ls10 ws115">it easy to do gradual refactoring and </div><div class="t m0 x6 h8 y14c ff7 fs7 fc0 sc0 ls10 wsca">reorganization of the codebase. The </div><div class="t m0 x6 h8 y14d ff7 fs7 fc0 sc0 ls10 ws6a">change to move a project and up<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y14e ff7 fs7 fc0 sc0 ls10 wsa">date all dependencies can be applied </div><div class="t m0 x6 h8 y14f ff7 fs7 fc0 sc0 ls10 wsdf">atomically to the repository, and the </div><div class="t m0 x6 h8 y150 ff7 fs7 fc0 sc0 ls10 ws142">development history of the affected </div><div class="t m0 x6 h8 y151 ff7 fs7 fc0 sc0 ls10 ws2">code remains intact and available. </div><div class="t m0 x5 h8 y152 ff7 fs7 fc0 sc0 ls10 ws143">Another attribute of a monolithic </div><div class="t m0 x6 h8 y153 ff7 fs7 fc0 sc0 ls10 ws46">repository is the layout of the code<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y154 ff7 fs7 fc0 sc0 ls18 wsb5">base is easily understood, as it is orga<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y155 ff7 fs7 fc0 sc0 ls18 ws144">nized in a single tree. Each team has </div><div class="t m0 x6 h8 y156 ff7 fs7 fc0 sc0 ls18 ws7b">a directory structure within the main </div><div class="t m0 x6 h8 y157 ff7 fs7 fc0 sc0 ls18 ws30">tree that effectively serves as a proj<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y158 ff7 fs7 fc0 sc0 ls10 ws11a">ec<span class="_ _0"></span>t’<span class="_ _0"></span>s <span class="_ _0"></span>own namespace. Each source ﬁle </div><div class="t m0 x6 h8 y159 ff7 fs7 fc0 sc0 ls10 ws75">can be uniquely identiﬁed by a single </div><div class="t m0 x6 h8 y15a ff7 fs7 fc0 sc0 ls10 ws145">string—a ﬁle path that optionally in<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y15b ff7 fs7 fc0 sc0 ls10 wsdd">cludes a revision number<span class="_ _0"></span>. Browsing </div><div class="t m0 x6 h8 y15c ff7 fs7 fc0 sc0 ls10 ws5c">the codebase, it is easy to understand </div><div class="t m0 x6 h8 y15d ff7 fs7 fc0 sc0 ls14 ws132">how<span class="_ _1"></span> any source ﬁle ﬁts into the big pic<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y15e ff7 fs7 fc0 sc0 ls14 ws2">ture of the repository<span class="_ _3"></span>. </div><div class="t m0 x5 h8 y15f ff7 fs7 fc0 sc0 lse ws95">The Google codebase is constantly </div><div class="t m0 x6 h8 y160 ff7 fs7 fc0 sc0 lse ws146">evolving. More complex codebase </div><div class="t m0 x6 h8 y161 ff7 fs7 fc0 sc0 lse wsa9">modernization efforts (such as updat<span class="ls1 ws2">-</span></div><div class="t m0 x1 h9 y162 ff1 fs7 fc0 sc0 ls1 ws2">Anal<span class="_ _0"></span>ysis </div><div class="t m0 x1 h8 y163 ff7 fs7 fc0 sc0 ls1 ws59">This section outlines and expands </div><div class="t m0 x1 h8 y164 ff7 fs7 fc0 sc0 ls1 ws147">upon both the advantages of a mono<span class="ws2">-</span></div><div class="t m0 x1 h8 y165 ff7 fs7 fc0 sc0 ls1 wsbd">lithic codebase and the costs related to </div><div class="t m0 x1 h8 y166 ff7 fs7 fc0 sc0 ls1 ws2">maintaining such a model at scale. </div><div class="t m0 x29 h8 y167 ffb fs7 fc0 sc0 ls1 ws2">Advantages. <span class="_ _20"> </span><span class="ff7 ws148">Supporting the ultra-</span></div><div class="t m0 x1 h8 y168 ff7 fs7 fc0 sc0 ls1 ws70">large-scale of Google’s codebase while </div><div class="t m0 x1 h8 y169 ff7 fs7 fc0 sc0 ls1 ws149">maintaining good performance for </div><div class="t m0 x1 h8 y16a ff7 fs7 fc0 sc0 ls1 ws7b">tens of thousands of users is a chal<span class="ws2">-</span></div><div class="t m0 x1 h8 y16b ff7 fs7 fc0 sc0 ls1 wsd4">lenge, but Google has embraced the </div><div class="t m0 x1 h8 y16c ff7 fs7 fc0 sc0 ls1 ws14a">monolithic model due to its compel<span class="ws2">-</span></div><div class="t m0 x1 h8 y16d ff7 fs7 fc0 sc0 ls1 ws2">ling advantages. </div><div class="t m0 x29 h8 y16e ff7 fs7 fc0 sc0 ls1 ws2">Most important, it supports: </div><div class="t m0 x26 h17 y1d8 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1d9 ff7 fs7 fc0 sc0 ls1 wsf5">Uniﬁed versioning, one source of </div><div class="t m0 x1 h8 y1da ff7 fs7 fc0 sc0 ls1 ws2">truth; </div><div class="t m0 x26 h17 y1db ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1dc ff7 fs7 fc0 sc0 ls1 ws2">Extensive code sharing and reuse; </div><div class="t m0 x26 h17 y1dd ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1de ff7 fs7 fc0 sc0 ls1 ws14b">Simpliﬁed dependency manage<span class="ws2">-</span></div><div class="t m0 x1 h8 y1df ff7 fs7 fc0 sc0 ls1 ws2">ment; </div><div class="t m0 x26 h17 y1e0 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1e1 ff7 fs7 fc0 sc0 ls1 ws2">Atomic changes; </div><div class="t m0 x26 h17 y1e2 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1e3 ff7 fs7 fc0 sc0 ls1 ws2">Large-scale refactoring; </div><div class="t m0 x26 h17 y1e4 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1e5 ff7 fs7 fc0 sc0 ls1 ws2">Collaboration across teams; </div><div class="t m0 x26 h17 y1e6 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1e7 ff7 fs7 fc0 sc0 ls1 ws5f">Flexible team boundaries and code </div><div class="t m0 x1 h8 y1e8 ff7 fs7 fc0 sc0 ls1 ws2">ownership; and </div><div class="t m0 x26 h17 y1e9 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x10 h8 y1ea ff7 fs7 fc0 sc0 ls1 ws14c">Code visibility and clear tree </div><div class="t m0 x1 h8 y1eb ff7 fs7 fc0 sc0 ls1 ws14d">structure providing implicit team </div><div class="t m0 x1 h8 y1ec ff7 fs7 fc0 sc0 ls1 ws2">namespacing. </div><div class="t m0 x29 h8 y1ed ff7 fs7 fc0 sc0 ls1 ws14e">A single repository provides uniﬁed </div><div class="t m0 x1 h8 y1ee ff7 fs7 fc0 sc0 ls1 ws2b">versioning and a single source of truth. </div><div class="t m0 x1 h8 y1ef ff7 fs7 fc0 sc0 ls1 ws14f">There is no confusion about which re<span class="ws2">-</span></div><div class="t m0 x1 h8 y1f0 ff7 fs7 fc0 sc0 ls1 ws133">pository hosts the authoritative version </div><div class="t m0 x1 h8 y1f1 ff7 fs7 fc0 sc0 ls1 wsa5">of a ﬁle. If one team wants to depend </div><div class="t m0 x1 h8 y1f2 ff7 fs7 fc0 sc0 ls1 wsff">on another team’s code, it can depend </div><div class="t m0 x1 h8 y1f3 ff7 fs7 fc0 sc0 ls1 ws55">on it directly<span class="_ _3"></span>. The Google codebase in<span class="ws2">-</span></div><div class="t m0 x1 h8 y1f4 ff7 fs7 fc0 sc0 ls1 ws60">cludes a wealth of useful libraries, and </div><div class="t m0 x1 h8 y1f5 ff7 fs7 fc0 sc0 ls1 ws150">the monolithic repository leads to ex<span class="ws2">-</span></div><div class="t m0 x1 h8 y1f6 ff7 fs7 fc0 sc0 ls1 ws2">tensive code sharing and reuse.</div><div class="t m0 x29 h8 y1f7 ff7 fs7 fc0 sc0 ls14 ws81">The Google build system</div><div class="t m0 x43 ha y1f8 ff7 fs8 fc0 sc0 ls1 ws2">5</div><div class="t m0 x44 h8 y55 ff7 fs7 fc0 sc0 ls14 ws81"> makes it </div><div class="t m0 x1 h8 y56 ff7 fs7 fc0 sc0 lse wsb3">easy t<span class="_ _0"></span>o include code across directo<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y57 ff7 fs7 fc0 sc0 lse ws2b">ries, simplifying dependency manage<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y58 ff7 fs7 fc0 sc0 lse ws9f">ment. Changes to the dependencies </div><div class="t m0 x1 h8 y59 ff7 fs7 fc0 sc0 lse ws151">of a project trigger a rebuild of the </div><div class="t m0 x1 h8 y5a ff7 fs7 fc0 sc0 ls14 ws13">dependent code. Since all code is ver<span class="ls1 ws2">-</span></div><div class="t m0 x39 h8 y1f9 ff7 fs7 fc0 sc0 ls9 wsc6">si<span class="_ _0"></span>oned in the same repository, there<span class="_ _0"></span> </div><div class="t m0 x39 h8 y1fa ff7 fs7 fc0 sc0 ls9 ws4d">is only ever one version of the truth, </div><div class="t m0 x39 h8 y1fb ff7 fs7 fc0 sc0 ls9 wsd7">and no concern about independent </div><div class="t m0 x39 h8 y1fc ff7 fs7 fc0 sc0 ls9 ws2">versioning of dependen<span class="_ _0"></span>cie<span class="_ _0"></span>s. </div><div class="t m0 x45 h8 y1fd ff7 fs7 fc0 sc0 ls15 ws152">Most notably, the model allows </div><div class="t m0 x39 h8 y1fe ff7 fs7 fc0 sc0 ls15 wsc9">Google to avoid the “diamond depen<span class="ls1 ws2">-</span></div><div class="t m0 x39 h8 y1ff ff7 fs7 fc0 sc0 ls15 ws153">dency” problem (see Figure 8) that oc<span class="ls1 ws2">-</span></div><div class="t m0 x39 h8 y200 ff7 fs7 fc0 sc0 ls15 wsa5">curs when A depends on B and C, both </div><div class="t m0 x39 h8 y201 ff7 fs7 fc0 sc0 ls1 wsa6">B <span class="_ _0"></span>an<span class="_ _0"></span>d <span class="_ _0"></span>C d<span class="_ _0"></span>ep<span class="_ _0"></span>en<span class="_ _0"></span>d on D, but B requires </div><div class="t m0 x39 h8 y202 ff7 fs7 fc0 sc0 ls1 ws6">version D.1 and C requires version D.2. </div><div class="t m0 x39 h8 y203 ff7 fs7 fc0 sc0 ls1 ws154">In most cases it is now impossible to </div><div class="t m0 x39 h8 y204 ff7 fs7 fc0 sc0 ls1 wsd6">build A. For the base library D, it can </div><div class="t m0 x39 h8 y205 ff7 fs7 fc0 sc0 ls1 ws9e">become very difﬁcult to release a new </div><div class="t m0 x39 h8 y206 ff7 fs7 fc0 sc0 ls1 ws155">version without causing breakage, </div><div class="t m0 x39 h8 y207 ff7 fs7 fc0 sc0 ls1 ws2c">since all its callers must be updated </div><div class="t m0 x39 h8 y208 ff7 fs7 fc0 sc0 ls1 wsae">at the same time. Updating is difﬁcult </div><div class="t m0 x39 h8 y209 ff7 fs7 fc0 sc0 ls15 ws156">wh<span class="_ _1"></span>en<span class="_ _1"></span> t<span class="_ _1"></span>he <span class="_ _1"></span>li<span class="_ _1"></span>br<span class="_ _1"></span>ary<span class="_ _1"></span> callers are hosted in<span class="_ _1"></span> </div><div class="t m0 x39 h8 y20a ff7 fs7 fc0 sc0 ls15 ws2">different repositories. </div><div class="t m0 x45 h8 y20b ff7 fs7 fc0 sc0 ls1 wsee">In the open source world, depen<span class="ws2">-</span></div><div class="t m0 x39 h8 y20c ff7 fs7 fc0 sc0 ls1 wse3">dencies are commonly broken by li<span class="ws2">-</span></div><div class="t m0 x39 h8 y20d ff7 fs7 fc0 sc0 ls1 wsf1">brary updates, and ﬁnding library ver<span class="ws2">-</span></div><div class="t m0 x39 h8 y20e ff7 fs7 fc0 sc0 ls1 ws127">sions that all work together can be a </div><div class="t m0 x39 h8 y20f ff7 fs7 fc0 sc0 ls1 ws157">challenge. Updating the versions of </div><div class="t m0 x39 h8 y210 ff7 fs7 fc0 sc0 ls1 ws5c">dependencies can be painful for devel<span class="ws2">-</span></div><div class="t m0 x39 h8 y211 ff7 fs7 fc0 sc0 ls1 ws158">opers, and delays in updating create </div><div class="t m0 x39 h8 y212 ff7 fs7 fc0 sc0 ls1 ws159">technical debt that can become very </div><div class="t m0 x39 h8 y213 ff7 fs7 fc0 sc0 ls1 ws9f">expensive. In contrast, with a mono<span class="ws2">-</span></div><div class="t m0 x39 h8 y214 ff7 fs7 fc0 sc0 ls1 ws11f">lithic source tree it makes sense, and </div><div class="t m0 x39 h8 y215 ff7 fs7 fc0 sc0 ls1 wsef">is easier, for the person updating a li<span class="ws2">-</span></div><div class="t m0 x39 h8 y216 ff7 fs7 fc0 sc0 ls1 ws15a">brary to update all affected dependen<span class="ws2">-</span></div><div class="t m0 x39 h8 y217 ff7 fs7 fc0 sc0 ls1 ws136">cies at the same time. The technical </div><div class="t m0 x39 h8 y218 ff7 fs7 fc0 sc0 ls1 ws4f">debt incurred by dependent systems is </div><div class="t m0 x39 h8 y219 ff7 fs7 fc0 sc0 ls1 wsa2">paid down immediately as changes are </div><div class="t m0 x39 h8 y21a ff7 fs7 fc0 sc0 ls1 wsa4">made. Changes to base libraries are in<span class="ws2">-</span></div><div class="t m0 x39 h8 y21b ff7 fs7 fc0 sc0 ls1 ws15b">stantly propagated through the depen<span class="ws2">-</span></div><div class="t m0 x39 h8 y21c ff7 fs7 fc0 sc0 ls1 ws15c">dency chain into the ﬁnal products that </div><div class="t m0 x39 h8 y21d ff7 fs7 fc0 sc0 ls1 ws17">rely on the libraries, without requiring </div><div class="t m0 x39 h8 y21e ff7 fs7 fc0 sc0 ls1 ws2">a separate sync or migration step. </div><div class="t m0 x45 h8 y21f ff7 fs7 fc0 sc0 ls1 ws15d">Note the diamond-dependency </div><div class="t m0 x39 h8 y220 ff7 fs7 fc0 sc0 lse ws15e">pro<span class="_ _0"></span>blem can exist at the source/<span class="_ _3"></span>API </div><div class="t m0 x39 h8 y221 ff7 fs7 fc0 sc0 ls1c ws141">l<span class="_ _0"></span>ev<span class="_ _0"></span>e<span class="_ _0"></span>l,<span class="_ _0"></span> a<span class="_ _3"></span>s <span class="_ _0"></span>de<span class="_ _3"></span>scribed here, as well as<span class="_ _3"></span> </div><div class="t m0 x39 h8 y222 ff7 fs7 fc0 sc0 ls12 ws15f">bet<span class="_ _1"></span>ween binaries.</div><div class="t m0 x46 ha y223 ff7 fs8 fc0 sc0 ls1d ws160">12</div><div class="t m0 x47 h8 y224 ff7 fs7 fc0 sc0 ls1 ws161"> A<span class="_ _1"></span>t G<span class="_ _1"></span>o<span class="_ _1"></span>og<span class="_ _1"></span>le, <span class="_ _0"></span>the </div><div class="t m0 x22 h2 y1d3 ff1 fs0 fc5 sc0 ls1 ws2">Figure 8. Diamond dependency problem. </div><div class="t m0 x2f h12 y225 ff12 fs3 fc0 sc0 ls1 ws2">A</div><div class="t m0 x2f h12 y226 ff12 fs3 fc0 sc0 ls1 ws2">D</div><div class="t m0 x48 h12 y227 ff12 fs3 fc0 sc0 ls1 ws2">B<span class="_ _22"> </span>C</div><div class="t m0 x49 h12 y225 ff12 fs3 fc5 sc0 ls1 ws2">A</div><div class="t m0 x4a h12 y227 ff12 fs3 fc5 sc0 ls1 ws2">B</div><div class="t m0 x33 h12 y228 ff12 fs3 fc5 sc0 ls1e ws162">D.1</div><div class="t m0 x4b h12 y227 ff12 fs3 fc5 sc0 ls1 ws2">C</div><div class="t m0 x4c h12 y229 ff12 fs3 fc5 sc0 ls1e ws162">D.2</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf8" class="pf w0 h0" data-page-no="8"><div class="pc pc8 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg8.png"/><div class="t m0 xe h2 y1 ff2 fs1 fc0 sc0 ls2 ws2">JUL<span class="_ _3"></span>Y 2016  |  VOL. 59  |  NO. 7  <span class="fc1 ls1">|<span class="_ _1"></span><span class="fc0 ws3">  </span></span><span class="ff1">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws1">    </span><span class="fs0 ls0 ws0">85</span></span></div><div class="t m0 x2c h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x4 h8 yd8 ff7 fs7 fc0 sc0 lse ws163">ing it to C++11 or rolling out perfor<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 yd9 ff7 fs7 fc0 sc0 lse ws50">mance optimizations</div><div class="t m0 x4d ha y22a ff7 fs8 fc0 sc0 ls1 ws2">9</div><div class="t m0 x4e h8 y22b ff7 fs7 fc0 sc0 lse ws50">) are often man<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y22c ff7 fs7 fc0 sc0 lse ws164">aged centrally by dedicated codebase </div><div class="t m0 x4 h8 y22d ff7 fs7 fc0 sc0 lse ws13a">maintainers. Such efforts can touch </div><div class="t m0 x4 h8 y22e ff7 fs7 fc0 sc0 lse ws75">half a million variable declarations or </div><div class="t m0 x4 h8 y22f ff7 fs7 fc0 sc0 lse ws165">function-call sites spread across hun<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y230 ff7 fs7 fc0 sc0 lse ws10b">dreds of thousands of ﬁles of source </div><div class="t m0 x4 h8 y231 ff7 fs7 fc0 sc0 lse ws166">code. Because all projects are central<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y232 ff7 fs7 fc0 sc0 lse ws9e">ly stored, teams of specialists can do </div><div class="t m0 x4 h8 y233 ff7 fs7 fc0 sc0 lse ws5f">this work for the entire company, rath<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y234 ff7 fs7 fc0 sc0 lse ws142">er than require many individuals to </div><div class="t m0 x4 h8 y235 ff7 fs7 fc0 sc0 lse ws114">develop their own tools, techniques, </div><div class="t m0 x4 h8 y236 ff7 fs7 fc0 sc0 lse ws2">or expertise. </div><div class="t m0 x10 h8 y237 ff7 fs7 fc0 sc0 lse wsf0">As an example of how these ben<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y238 ff7 fs7 fc0 sc0 lse ws4f">eﬁts play out, consider Google’s Com<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y239 ff7 fs7 fc0 sc0 ls1 ws3a">piler team, which ensures developers </div><div class="t m0 x4 h8 y23a ff7 fs7 fc0 sc0 ls9 wsa8">at Google employ the most up-to-date </div><div class="t m0 x4 h8 y23b ff7 fs7 fc0 sc0 ls9 ws105">toolchains and benefit from the lat<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y23c ff7 fs7 fc0 sc0 ls11 ws14e">est i<span class="_ _0"></span>mprovements in generated code </div><div class="t m0 x4 h8 y23d ff7 fs7 fc0 sc0 ls11 ws167">and “debuggability<span class="_ _3"></span>.” The monolithic </div><div class="t m0 x4 h8 y23e ff7 fs7 fc0 sc0 ls11 ws157">repository provides the team with </div><div class="t m0 x4 h8 y23f ff7 fs7 fc0 sc0 ls11 wsb6">full visibility of how variou<span class="_ _0"></span>s l<span class="_ _0"></span>ang<span class="_ _0"></span>uag<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y240 ff7 fs7 fc0 sc0 lse ws168">es are used at Google and allows them </div><div class="t m0 x4 h8 y241 ff7 fs7 fc0 sc0 lse ws169">to do codebase-wide cleanups to pre<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y242 ff7 fs7 fc0 sc0 lse ws69">vent changes from breaking builds or </div><div class="t m0 x4 h8 y243 ff7 fs7 fc0 sc0 lse ws12">creating issues for developers. This </div><div class="t m0 x4 h8 y244 ff7 fs7 fc0 sc0 lse wse4">greatly simpliﬁes compiler validation, </div><div class="t m0 x4 h8 y245 ff7 fs7 fc0 sc0 lse ws69">thus reducing compiler release cycles </div><div class="t m0 x4 h8 y246 ff7 fs7 fc0 sc0 lse ws16a">and making it possible for Google to </div><div class="t m0 x4 h8 y247 ff7 fs7 fc0 sc0 lse ws16b">safely do regular compiler releases </div><div class="t m0 x4 h8 y248 ff7 fs7 fc0 sc0 lse ws9">(typically more than 20 per year for the </div><div class="t m0 x4 h8 y249 ff7 fs7 fc0 sc0 lse ws2">C++ compilers). </div><div class="t m0 x10 h8 y24a ff7 fs7 fc0 sc0 ls18 ws138">Using the data generated by perfo<span class="_ _1"></span>r<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y24b ff7 fs7 fc0 sc0 lse ws16c">mance and regression tests run on </div><div class="t m0 x4 h8 y24c ff7 fs7 fc0 sc0 lse ws148">nightly builds of the entire Google </div><div class="t m0 x4 h8 y24d ff7 fs7 fc0 sc0 ls18 ws7e">co<span class="_ _1"></span>debase, the Compiler team tunes de<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y24e ff7 fs7 fc0 sc0 ls18 ws144">fault compiler settings to be optimal. </div><div class="t m0 x4 h8 y24f ff7 fs7 fc0 sc0 ls18 ws6e">For example, due to this centralized </div><div class="t m0 x4 h8 y250 ff7 fs7 fc0 sc0 ls18 ws14f">effort, Google’s Java developers all saw </div><div class="t m0 x4 h8 y251 ff7 fs7 fc0 sc0 ls18 ws69">their garbage collection (GC) CPU con<span class="_ _1"></span><span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y252 ff7 fs7 fc0 sc0 ls10 ws13c">su<span class="_ _0"></span>mpt<span class="_ _0"></span>ion<span class="_ _0"></span> decrease by more than 50% </div><div class="t m0 x4 h8 y253 ff7 fs7 fc0 sc0 ls10 ws16d">and their GC pause time decrease by </div><div class="t m0 x4 h8 y254 ff7 fs7 fc0 sc0 ls10 ws15a">10%–40% from 2014 to 2015. In addi<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y255 ff7 fs7 fc0 sc0 ls10 ws16e">tion, when software errors are discov<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y256 ff7 fs7 fc0 sc0 ls10 ws16f">ered, it is often possible for the team </div><div class="t m0 x4 h8 y257 ff7 fs7 fc0 sc0 ls10 wsa3">to add new warnings to prevent reoc<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y258 ff7 fs7 fc0 sc0 ls10 ws170">currence. In conjunction with this </div><div class="t m0 x4 h8 y259 ff7 fs7 fc0 sc0 ls10 ws171">change, they scan the entire reposi<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y25a ff7 fs7 fc0 sc0 ls10 ws10f">tory to ﬁnd and ﬁx other instances of </div><div class="t m0 x4 h8 y25b ff7 fs7 fc0 sc0 ls10 ws172">the software issue being addressed, </div><div class="t m0 x4 h8 y25c ff7 fs7 fc0 sc0 ls10 ws173">before turning to new compiler er<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y25d ff7 fs7 fc0 sc0 ls10 ws11f">rors. Having the compiler-reject pat<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y25e ff7 fs7 fc0 sc0 ls10 ws115">terns that proved problematic in the </div><div class="t m0 x4 h8 y25f ff7 fs7 fc0 sc0 lse wsf7">past is a signiﬁcant boost to Google’s </div><div class="t m0 x4 h8 y260 ff7 fs7 fc0 sc0 lse ws2">overall code health. </div><div class="t m0 x10 h8 y261 ff7 fs7 fc0 sc0 ls1 ws174">Storing all source code in a common </div><div class="t m0 x4 h8 y262 ff7 fs7 fc0 sc0 ls1 ws175">version-control repository allows code-</div><div class="t m0 x4 h8 y263 ff7 fs7 fc0 sc0 ls1 ws4a">base maintainers to efﬁciently ana<span class="ws2">-</span></div><div class="t m0 x4 h8 y264 ff7 fs7 fc0 sc0 ls1 wsf4">lyze and change Google’s source code. </div><div class="t m0 x4 h8 y265 ff7 fs7 fc0 sc0 ls1 ws8">Tools like R<span class="_ _0"></span>efaster</div><div class="t m0 x4f ha y266 ff7 fs8 fc0 sc0 ls1 ws2">11</div><div class="t m0 x50 h8 y54 ff7 fs7 fc0 sc0 ls1 ws8"> and ClangMR</div><div class="t m0 x51 ha y266 ff7 fs8 fc0 sc0 ls1 ws2">15</div><div class="t m0 x3b h8 y54 ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x18 h8 y267 ff7 fs7 fc0 sc0 ls1 ws43">(often used in conjunction with Rosie) </div><div class="t m0 x18 h8 y268 ff7 fs7 fc0 sc0 ls1 ws173">make use of the monolithic view of </div><div class="t m0 x18 h8 y269 ff7 fs7 fc0 sc0 ls1 ws10c">Google’s source to perform high-level </div><div class="t m0 x18 h8 y26a ff7 fs7 fc0 sc0 ls1 wsd8">transformations of source code. The </div><div class="t m0 x18 h8 y26b ff7 fs7 fc0 sc0 ls9 ws176">mo<span class="_ _0"></span>no<span class="_ _0"></span>lit<span class="_ _0"></span>hic codebase captures all de<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y26c ff7 fs7 fc0 sc0 ls9 wsac">pendency information. Old APIs can </div><div class="t m0 x18 h8 y26d ff7 fs7 fc0 sc0 ls9 ws9">be removed with confidence, because </div><div class="t m0 x18 h8 y26e ff7 fs7 fc0 sc0 ls9 wse0">it can be proven that all callers have </div><div class="t m0 x18 h8 y26f ff7 fs7 fc0 sc0 ls9 wsa5">been migrated to new APIs. A single </div><div class="t m0 x18 h8 y270 ff7 fs7 fc0 sc0 ls9 ws2f">common repository vastly simplifies </div><div class="t m0 x18 h8 y271 ff7 fs7 fc0 sc0 ls10 ws42">these t<span class="_ _1"></span>ools by ens<span class="_ _1"></span>uring atomicity <span class="_ _0"></span>of </div><div class="t m0 x18 h8 y272 ff7 fs7 fc0 sc0 ls10 ws14a">changes and a single global view of </div><div class="t m0 x18 h8 y273 ff7 fs7 fc0 sc0 ls1 ws2">th<span class="_ _1"></span>e e<span class="_ _1"></span>nti<span class="_ _1"></span>re repository at any given time. </div><div class="t m0 x19 h8 y274 ffb fs7 fc0 sc0 ls1 ws163">Costs and trade-offs.<span class="ff7"> While impor<span class="ws2">-</span></span></div><div class="t m0 x18 h8 y275 ff7 fs7 fc0 sc0 ls1 wsdb">tant to note a monolithic codebase in </div><div class="t m0 x18 h8 y276 ff7 fs7 fc0 sc0 ls1 wsab">no way implies monolithic software de<span class="ws2">-</span></div><div class="t m0 x18 h8 y277 ff7 fs7 fc0 sc0 ls1 wsff">sign, working with this model involves </div><div class="t m0 x18 h8 y278 ff7 fs7 fc0 sc0 ls1 ws3b">some downsides, as well as trade-offs, </div><div class="t m0 x18 h8 y279 ff7 fs7 fc0 sc0 ls1 ws2">that must be considered. </div><div class="t m0 x19 h8 y27a ff7 fs7 fc0 sc0 ls1 wsf8">These costs and trade-offs fall into </div><div class="t m0 x18 h8 y27b ff7 fs7 fc0 sc0 ls1 ws2">three categories: </div><div class="t m0 x52 h17 y1e6 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x53 h8 y1e7 ff7 fs7 fc0 sc0 ls1 ws7b">Tooling investments for both de<span class="ws2">-</span></div><div class="t m0 x18 h8 y1e8 ff7 fs7 fc0 sc0 ls1 ws2">velopment and execution; </div><div class="t m0 x52 h17 y1e9 ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x53 h8 y1ea ff7 fs7 fc0 sc0 ls1 ws177">Codebase complexity, including </div><div class="t m0 x18 h8 y1eb ff7 fs7 fc0 sc0 ls1 ws178">unnecessary dependencies and difﬁ<span class="ws2">-</span></div><div class="t m0 x18 h8 y1ec ff7 fs7 fc0 sc0 ls1 ws2">culties with code discovery; and </div><div class="t m0 x52 h17 y27c ff9 fs3 fc0 sc0 ls1 ws2"> <span class="_ _21"></span>˲</div><div class="t m0 x53 h8 y27d ff7 fs7 fc0 sc0 ls1 ws2">Effort invested in code health. </div><div class="t m0 x19 h8 y27e ff7 fs7 fc0 sc0 ls14 ws2b">In many ways the monolithic repos<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y27f ff7 fs7 fc0 sc0 ls14 ws79">itory yields simpler tooling since there </div><div class="t m0 x18 h8 y280 ff7 fs7 fc0 sc0 ls14 ws178">is only one system of reference for </div><div class="t m0 x18 h8 y281 ff7 fs7 fc0 sc0 ls14 ws179">tools working with source. However, it </div><div class="t m0 x18 h8 y282 ff7 fs7 fc0 sc0 ls14 ws2f">is also necessary that tooling sca<span class="_ _0"></span>le to<span class="_ _0"></span> </div><div class="t m0 x18 h8 y283 ff7 fs7 fc0 sc0 ls18 ws10f">the size of the repository<span class="_ _3"></span>. For instance, </div><div class="t m0 x18 h8 y284 ff7 fs7 fc0 sc0 ls18 ws6f">Google has written a custom pl<span class="_ _1"></span>ug-<span class="_ _1"></span>in <span class="_ _1"></span>for </div><div class="t m0 x18 h8 y285 ff7 fs7 fc0 sc0 lse ws17a">the Eclipse integrated development </div><div class="t m0 x18 h8 y286 ff7 fs7 fc0 sc0 lse ws17b">environment (IDE) to make work<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y287 ff7 fs7 fc0 sc0 lse ws95">ing with a massive codebase possible </div><div class="t m0 x18 h8 y288 ff7 fs7 fc0 sc0 lse ws13c">from the IDE. Google’s code-indexing </div><div class="t m0 x18 h8 y289 ff7 fs7 fc0 sc0 lse ws7">system supports static analysis, cross-</div><div class="t m0 x18 h8 y28a ff7 fs7 fc0 sc0 lse ws17c">referencing in the code-browsing <span class="_ _0"></span>tool, </div><div class="t m0 x18 h8 y28b ff7 fs7 fc0 sc0 ls1f wsd7">an<span class="_ _1"></span>d r<span class="_ _1"></span>ic<span class="_ _1"></span>h ID<span class="_ _1"></span>E functionality for <span class="_ _0"></span>Emacs,<span class="_ _1"></span> </div><div class="t m0 x18 h8 y28c ff7 fs7 fc0 sc0 ls14 ws17d">Vi<span class="_ _0"></span>m,<span class="_ _0"></span> an<span class="_ _0"></span>d ot<span class="_ _0"></span>he<span class="_ _0"></span>r development <span class="_ _1"></span>environ<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y28d ff7 fs7 fc0 sc0 ls14 wsb">ments. These tools require ongoing in<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y28e ff7 fs7 fc0 sc0 ls14 wsb8">vestment to manage the ever-increas<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 y28f ff7 fs7 fc0 sc0 ls14 ws2">ing scale of the Google codebase. </div><div class="t m0 x19 h8 y290 ff7 fs7 fc0 sc0 ls1 ws120">Beyond the investment in build<span class="ws2">-</span></div><div class="t m0 x18 h8 y291 ff7 fs7 fc0 sc0 ls1 ws62">ing and maintaining scalable tooling, </div><div class="t m0 x18 h8 y292 ff7 fs7 fc0 sc0 ls1 ws50">Google must also cover the cost of run<span class="ws2">-</span></div><div class="t m0 x18 h8 y293 ff7 fs7 fc0 sc0 ls1 ws1a">ning these systems, some of which are </div><div class="t m0 x18 h8 y294 ff7 fs7 fc0 sc0 ls1 ws127">very computationally intensive. Much </div><div class="t m0 x18 h8 y295 ff7 fs7 fc0 sc0 ls1 ws17e">of Google’s internal suite of devel<span class="ws2">-</span></div><div class="t m0 x18 h8 y296 ff7 fs7 fc0 sc0 ls1 ws5e">oper tools, including the automated </div><div class="t m0 x18 h8 y297 ff7 fs7 fc0 sc0 ls1 ws92">test infrastructure and highly scalable </div><div class="t m0 x18 h8 y298 ff7 fs7 fc0 sc0 ls1 ws17f">build infrastructure, are critical for </div><div class="t m0 x18 h8 y299 ff7 fs7 fc0 sc0 ls1 ws180">supporting the size of the monolithic </div><div class="t m0 x18 h8 y29a ff7 fs7 fc0 sc0 ls1 ws16f">codebase. It is thus necessary to make </div><div class="t m0 x18 h8 y29b ff7 fs7 fc0 sc0 ls1 ws181">trade-offs concerning how frequently </div><div class="t m0 x18 h8 y29c ff7 fs7 fc0 sc0 ls1 ws92">to run this tooling to balance the cost </div><div class="t m0 x18 h8 y29d ff7 fs7 fc0 sc0 ls1 ws14e">of execution vs. the beneﬁt of the data </div><div class="t m0 x18 h8 y29e ff7 fs7 fc0 sc0 ls1 ws2">provided to developers. </div><div class="t m0 x15 h15 y29f ff1 fsf fc3 sc0 ls19 ws182">An impor<span class="_ _1"></span>tant aspect<span class="_ _23"></span> </div><div class="t m0 x15 h15 y2a0 ff1 fsf fc3 sc0 ls19 ws2">of Google culture<span class="_ _23"></span> </div><div class="t m0 x15 h15 y2a1 ff1 fsf fc3 sc0 ls19 ws2">that encourages<span class="_ _23"></span> </div><div class="t m0 x15 h15 y2a2 ff1 fsf fc3 sc0 ls19 ws2">code quality is<span class="_ _2"></span> <span class="_ _5"></span><span class="ls1"> </span></div><div class="t m0 x15 h15 y2a3 ff1 fsf fc3 sc0 ls19 ws2">the expectation<span class="_ _23"></span> <span class="_ _3"></span><span class="ls1"> </span></div><div class="t m0 x15 h15 y2a4 ff1 fsf fc3 sc0 ls19 ws2">that all code is<span class="_ _23"></span> </div><div class="t m0 x15 h15 y2a5 ff1 fsf fc3 sc0 ls19 ws2">reviewed before<span class="_ _23"></span> </div><div class="t m0 x15 h15 y2a6 ff1 fsf fc3 sc0 ls19 ws2">being committed<span class="_ _23"></span> <span class="_ _3"></span><span class="ls1"> </span></div><div class="t m0 x15 h15 y2a7 ff1 fsf fc3 sc0 ls19 ws2">to the repositor<span class="_ _1"></span>y<span class="_ _5"></span>.<span class="_ _23"></span> </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf9" class="pf w0 h0" data-page-no="9"><div class="pc pc9 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg9.png"/><div class="t m0 x1 h2 y1 ff1 fs0 fc0 sc0 ls0 ws0">86<span class="ff2 fs1 ls1 ws1">    <span class="ff1 ls2 ws2">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws3">   <span class="fc1 ws2">|<span class="_ _1"></span></span></span><span class="ff2">  JUL<span class="_ _3"></span>Y 2016  <span class="fc1 ls1">|<span class="_ _23"> </span></span>  VOL. 59  <span class="fc1 ls1">|<span class="_ _1"></span></span>  NO. 7</span></span></span></div><div class="t m0 x1a h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x5 h8 yd8 ff7 fs7 fc0 sc0 ls1 ws183">Dependency-refactoring and clean<span class="ws2">-</span></div><div class="t m0 x6 h8 yd9 ff7 fs7 fc0 sc0 ls1 ws10e">up tools are helpful, but, ideally, code </div><div class="t m0 x6 h8 yda ff7 fs7 fc0 sc0 ls1 ws184">owners should be able to prevent un<span class="ws2">-</span></div><div class="t m0 x6 h8 ydb ff7 fs7 fc0 sc0 ls1 ws147">wanted dependencies from being cre<span class="ws2">-</span></div><div class="t m0 x6 h8 ydc ff7 fs7 fc0 sc0 ls1 ws125">ated in the ﬁrst place. In 2011, Google </div><div class="t m0 x6 h8 ydd ff7 fs7 fc0 sc0 ls1b ws185">s<span class="_ _0"></span>ta<span class="_ _3"></span>rt<span class="_ _3"></span>ed<span class="_ _3"></span> r<span class="_ _3"></span>elying on the concept of<span class="_ _0"></span> </div><div class="t m0 x6 h8 yde ff7 fs7 fc0 sc0 ls1b ws186">API visibility, setting the default<span class="_ _0"></span> </div><div class="t m0 x6 h8 ydf ff7 fs7 fc0 sc0 ls1b ws187">visibility of new APIs to “private.”<span class="_ _0"></span> </div><div class="t m0 x6 h8 ye0 ff7 fs7 fc0 sc0 ls1b ws8a">This forces developers to explicitly<span class="_ _0"></span> </div><div class="t m0 x6 h8 y111 ff7 fs7 fc0 sc0 ls1b ws18">mark APIs as appropriate for use by<span class="_ _0"></span> </div><div class="t m0 x6 h8 y112 ff7 fs7 fc0 sc0 ls1b ws26">other teams. A lesson learned from<span class="_ _0"></span> </div><div class="t m0 x6 h8 y113 ff7 fs7 fc0 sc0 ls1b ws188">Google’s experience with a large<span class="_ _0"></span> </div><div class="t m0 x6 h8 y114 ff7 fs7 fc0 sc0 ls1b wsa4">monolithic repository is such mech<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y115 ff7 fs7 fc0 sc0 ls1 ws21">a<span class="_ _1"></span>ni<span class="_ _1"></span>s<span class="_ _1"></span>m<span class="_ _1"></span>s <span class="_ _1"></span>s<span class="_ _1"></span>h<span class="_ _1"></span>ou<span class="_ _1"></span>l<span class="_ _1"></span>d<span class="_ _1"></span> <span class="_ _1"></span>be put in place as soon </div><div class="t m0 x6 h8 y116 ff7 fs7 fc0 sc0 ls1 ws6f">as possible to encourage more hygienic </div><div class="t m0 x6 h8 y117 ff7 fs7 fc0 sc0 ls1 ws2">dependency structures. </div><div class="t m0 x5 h8 y118 ff7 fs7 fc0 sc0 ls1 wsd5">The fact that most Google code is </div><div class="t m0 x6 h8 y119 ff7 fs7 fc0 sc0 ls1 ws5d">available to all Google developers has </div><div class="t m0 x6 h8 y11a ff7 fs7 fc0 sc0 ls1 ws10e">led to a culture where some teams ex<span class="ws2">-</span></div><div class="t m0 x6 h8 y11b ff7 fs7 fc0 sc0 ls1 ws41">pect other developers to read their </div><div class="t m0 x6 h8 y13a ff7 fs7 fc0 sc0 ls1 ws189">code rather than providing them with </div><div class="t m0 x6 h8 y13b ff7 fs7 fc0 sc0 ls1 ws18a">separate user documentation. There </div><div class="t m0 x6 h8 y13c ff7 fs7 fc0 sc0 ls1 ws76">are pros and cons to this approach. No </div><div class="t m0 x6 h8 y13d ff7 fs7 fc0 sc0 ls1 wscc">effort goes toward writing or keeping </div><div class="t m0 x6 h8 y13e ff7 fs7 fc0 sc0 ls1 ws9b">documentation up to date, but devel<span class="ws2">-</span></div><div class="t m0 x6 h8 y13f ff7 fs7 fc0 sc0 ls1 wsaa">opers sometimes read more than the </div><div class="t m0 x6 h8 y140 ff7 fs7 fc0 sc0 ls1 ws75">API code and end up relying on under<span class="ws2">-</span></div><div class="t m0 x6 h8 y141 ff7 fs7 fc0 sc0 ls1 ws15a">lying implementation details. This be<span class="ws2">-</span></div><div class="t m0 x6 h8 y142 ff7 fs7 fc0 sc0 ls1 ws18b">havior can create a maintenance bur<span class="ws2">-</span></div><div class="t m0 x6 h8 y143 ff7 fs7 fc0 sc0 ls1 ws7f">den for teams that then have trouble </div><div class="t m0 x6 h8 y144 ff7 fs7 fc0 sc0 ls1 ws17">deprecating features they never meant </div><div class="t m0 x6 h8 y145 ff7 fs7 fc0 sc0 ls1 ws2">to expose to users. </div><div class="t m0 x5 h8 y146 ff7 fs7 fc0 sc0 ls14 wsf3">This model also requires teams to </div><div class="t m0 x6 h8 y147 ff7 fs7 fc0 sc0 ls14 ws18c">collaborate with one another when us<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y148 ff7 fs7 fc0 sc0 ls14 ws184">ing open source code. An area of the </div><div class="t m0 x6 h8 y149 ff7 fs7 fc0 sc0 ls14 wsd1">repository is reserved for storing open </div><div class="t m0 x6 h8 y14a ff7 fs7 fc0 sc0 ls14 ws7b">source code (developed at Google or </div><div class="t m0 x6 h8 y14b ff7 fs7 fc0 sc0 ls14 ws18d">externally). To prevent dependency<span class="_ _0"></span> </div><div class="t m0 x6 h8 y14c ff7 fs7 fc0 sc0 ls14 ws27">conﬂicts, as outlined earlier, it is im<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y14d ff7 fs7 fc0 sc0 ls14 ws8f">portant that only one version of an </div><div class="t m0 x6 h8 y14e ff7 fs7 fc0 sc0 ls14 ws15f">open source project be available at </div><div class="t m0 x6 h8 y14f ff7 fs7 fc0 sc0 ls14 ws137">any given time. Teams that use open </div><div class="t m0 x6 h8 y150 ff7 fs7 fc0 sc0 ls14 wsb8">source software are expected to occa<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y151 ff7 fs7 fc0 sc0 ls14 ws18e">sionally spend time upgrading their </div><div class="t m0 x6 h8 y152 ff7 fs7 fc0 sc0 ls14 ws14e">codebase to work with newer versions </div><div class="t m0 x6 h8 y153 ff7 fs7 fc0 sc0 ls14 ws163">of open source libraries when library </div><div class="t m0 x6 h8 y154 ff7 fs7 fc0 sc0 ls14 ws2">upgrades are performed. </div><div class="t m0 x5 h8 y155 ff7 fs7 fc0 sc0 ls1 ws2a">Google invests signiﬁcant effort in </div><div class="t m0 x6 h8 y156 ff7 fs7 fc0 sc0 ls1 ws18f">maintaining code health to address </div><div class="t m0 x6 h8 y157 ff7 fs7 fc0 sc0 ls10 ws190">so<span class="_ _0"></span>me <span class="_ _0"></span>issues related to codebase com<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y158 ff7 fs7 fc0 sc0 ls10 ws191">plexity and dependency manage<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y159 ff7 fs7 fc0 sc0 ls10 ws192">ment. For instance, special tooling<span class="_ _0"></span> </div><div class="t m0 x6 h8 y15a ff7 fs7 fc0 sc0 ls10 ws193">automatically detects and removes </div><div class="t m0 x6 h8 y15b ff7 fs7 fc0 sc0 ls10 ws194">dead code, splits large refactorings </div><div class="t m0 x6 h8 y15c ff7 fs7 fc0 sc0 ls10 ws195">and automatically assigns code re<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y15d ff7 fs7 fc0 sc0 ls10 ws12e">views (as through Rosie), and marks<span class="_ _0"></span> </div><div class="t m0 x6 h8 y15e ff7 fs7 fc0 sc0 ls10 ws2e">APIs as deprecated. Human effort is </div><div class="t m0 x6 h8 y15f ff7 fs7 fc0 sc0 ls10 ws70">required to run these tools and man<span class="ls1 ws2">-</span></div><div class="t m0 x6 h8 y160 ff7 fs7 fc0 sc0 ls10 ws196">age the corresponding large-scale </div><div class="t m0 x6 h8 y161 ff7 fs7 fc0 sc0 ls1 ws197">co<span class="_ _1"></span>de <span class="_ _1"></span>cha<span class="_ _1"></span>nges<span class="_ _1"></span>. A<span class="_ _1"></span> co<span class="_ _1"></span>st is also incurred </div><div class="t m0 x29 h8 y162 ff7 fs7 fc0 sc0 ls1 ws198">The monolithic model makes it </div><div class="t m0 x1 h8 y163 ff7 fs7 fc0 sc0 ls1 ws46">easier to understand the structure of </div><div class="t m0 x1 h8 y164 ff7 fs7 fc0 sc0 ls1 wsbd">the codebase, as there is no crossing of </div><div class="t m0 x1 h8 y165 ff7 fs7 fc0 sc0 ls1 ws1a">repository boundaries between depen<span class="ws2">-</span></div><div class="t m0 x1 h8 y166 ff7 fs7 fc0 sc0 ls1 ws4f">dencies. However, as the scale increas<span class="ws2">-</span></div><div class="t m0 x1 h8 y167 ff7 fs7 fc0 sc0 ls9 wsd6">es<span class="_ _0"></span>, <span class="_ _0"></span>co<span class="_ _0"></span>de <span class="_ _0"></span>discovery can become more<span class="_ _0"></span> </div><div class="t m0 x1 h18 y168 ff7 fs7 fc0 sc0 ls9 ws14e">difficult, as standard tools like <span class="ff13 ls20 wsaf">grep</span><span class="ls1 ws2"> </span></div><div class="t m0 x1 h8 y169 ff7 fs7 fc0 sc0 ls9 wsaa">bog down. Developers must be able </div><div class="t m0 x1 h8 y16a ff7 fs7 fc0 sc0 ls9 ws8d">to explore the codebase, find relevant </div><div class="t m0 x1 h8 y16b ff7 fs7 fc0 sc0 ls9 ws57">libraries, and see how to use them </div><div class="t m0 x1 h8 y16c ff7 fs7 fc0 sc0 ls9 ws16e">and who wrote them. Library authors </div><div class="t m0 x1 h8 y16d ff7 fs7 fc0 sc0 ls9 wsf1">often need to see how their APIs are </div><div class="t m0 x1 h8 y16e ff7 fs7 fc0 sc0 ls9 ws8e">being used. This requires a signifi<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y16f ff7 fs7 fc0 sc0 ls9 wscc">cant investment in code search and </div><div class="t m0 x1 h8 y170 ff7 fs7 fc0 sc0 ls14 ws10b">br<span class="_ _1"></span>ows<span class="_ _1"></span>ing<span class="_ _1"></span> tools. However, Google has </div><div class="t m0 x1 h8 y171 ff7 fs7 fc0 sc0 ls14 ws2e">found this investment highly reward<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y172 ff7 fs7 fc0 sc0 ls14 ws128">ing, improving the productivity of all </div><div class="t m0 x1 h8 y173 ff7 fs7 fc0 sc0 ls1f ws75">de<span class="_ _1"></span>ve<span class="_ _1"></span>lo<span class="_ _1"></span>per<span class="_ _1"></span>s,<span class="_ _1"></span> a<span class="_ _1"></span>s described in more detail<span class="_ _1"></span> </div><div class="t m0 x1 h8 y174 ff7 fs7 fc0 sc0 ls1f ws2">by Sadowski et al.</div><div class="t m0 x54 ha y2a8 ff7 fs8 fc0 sc0 ls1 ws2">9</div><div class="t m0 x55 h8 y1e1 ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x29 h8 y2a9 ff7 fs7 fc0 sc0 ls1 wsb7">Access to the whole codebase en<span class="ws2">-</span></div><div class="t m0 x1 h8 y2aa ff7 fs7 fc0 sc0 ls1 ws199">courages extensive code sharing and </div><div class="t m0 x1 h8 y2ab ff7 fs7 fc0 sc0 ls1 ws7f">reuse. Some would argue this model, </div><div class="t m0 x1 h8 y2ac ff7 fs7 fc0 sc0 ls1 wsd9">which relies on the extreme scalabil<span class="ws2">-</span></div><div class="t m0 x1 h8 y2ad ff7 fs7 fc0 sc0 ls1 ws147">ity of the Google build system, makes </div><div class="t m0 x1 h8 y2ae ff7 fs7 fc0 sc0 ls1 ws9f">it too easy to add dependencies and </div><div class="t m0 x1 h8 y2af ff7 fs7 fc0 sc0 ls1 ws77">reduces the incentive for software de<span class="ws2">-</span></div><div class="t m0 x1 h8 y2b0 ff7 fs7 fc0 sc0 ls1 ws68">velopers to produce stable and well-</div><div class="t m0 x1 h8 y2b1 ff7 fs7 fc0 sc0 ls1 ws2">thought-out APIs. </div><div class="t m0 x29 h8 y2b2 ff7 fs7 fc0 sc0 ls21 ws19a">Due to the ease of creating dependen<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2b3 ff7 fs7 fc0 sc0 ls21 ws6f">cies, it is common for teams to not think </div><div class="t m0 x1 h8 y2b4 ff7 fs7 fc0 sc0 ls21 ws15a">about their dependency graph, making </div><div class="t m0 x1 h8 y2b5 ff7 fs7 fc0 sc0 ls21 ws19b">code cleanup more error-prone. Un<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2b6 ff7 fs7 fc0 sc0 ls21 ws19c">necessary dependencies can increase </div><div class="t m0 x1 h8 y2b7 ff7 fs7 fc0 sc0 ls21 ws143">project exposure to downstream build </div><div class="t m0 x1 h8 y2b8 ff7 fs7 fc0 sc0 ls21 ws13">breakages, lead to binary size bloating, </div><div class="t m0 x1 h8 y2b9 ff7 fs7 fc0 sc0 ls21 wsac">and create additional work in building </div><div class="t m0 x1 h8 y2ba ff7 fs7 fc0 sc0 ls21 ws9c">and testing. In addition, lost productiv<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2bb ff7 fs7 fc0 sc0 ls21 ws19d">ity ensues when abandoned projects </div><div class="t m0 x1 h8 y2bc ff7 fs7 fc0 sc0 ls21 ws29">that remain in the repository continue </div><div class="t m0 x1 h8 y2bd ff7 fs7 fc0 sc0 ls21 ws2">to be updated and maintained. </div><div class="t m0 x29 h8 y2be ff7 fs7 fc0 sc0 lse ws152">Several efforts at Google have </div><div class="t m0 x1 h8 y2bf ff7 fs7 fc0 sc0 lse ws169">sought to rein in unnecessary depen<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2c0 ff7 fs7 fc0 sc0 lse ws174">dencies. Tooling exists to help identify<span class="_ _0"></span> </div><div class="t m0 x1 h8 y2c1 ff7 fs7 fc0 sc0 lse ws14e">and remove unused dependencies, or </div><div class="t m0 x1 h8 y2c2 ff7 fs7 fc0 sc0 lse ws19e">dependencies linked into the prod<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2c3 ff7 fs7 fc0 sc0 lse ws3b">uct binary for historical or accidental </div><div class="t m0 x1 h8 y2c4 ff7 fs7 fc0 sc0 lse wsa3">reasons, that are not needed. Tooling<span class="_ _0"></span> </div><div class="t m0 x1 h8 y2c5 ff7 fs7 fc0 sc0 lse wsdc">also exists to identify underutilized </div><div class="t m0 x1 h8 y2c6 ff7 fs7 fc0 sc0 lse ws19f">dependencies, or dependencies on </div><div class="t m0 x1 h8 y2c7 ff7 fs7 fc0 sc0 lse ws11a">large libraries that are mostly unneed<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2c8 ff7 fs7 fc0 sc0 ls18 ws121">ed<span class="_ _1"></span>, a<span class="_ _1"></span>s c<span class="_ _1"></span>andi<span class="_ _1"></span>dates for refactoring.</div><div class="t m0 x56 ha y2c9 ff7 fs8 fc0 sc0 ls1 ws2">7</div><div class="t m0 x57 h8 y75 ff7 fs7 fc0 sc0 ls18 ws121"> One </div><div class="t m0 x1 h8 y76 ff7 fs7 fc0 sc0 ls18 ws2e">such tool, Clipper, relies on a custom </div><div class="t m0 x1 h8 y77 ff7 fs7 fc0 sc0 ls18 ws137">Java compiler to generate an accurate </div><div class="t m0 x1 h8 y78 ff7 fs7 fc0 sc0 ls18 wsc7">cross-reference index. It then uses the </div><div class="t m0 x1 h8 y79 ff7 fs7 fc0 sc0 ls18 ws125">index to construct a reachability graph </div><div class="t m0 x1 h8 y7a ff7 fs7 fc0 sc0 ls18 ws13e">and determine what classes are never </div><div class="t m0 x1 h8 y7b ff7 fs7 fc0 sc0 ls18 ws3d">used. Clipper is useful in guiding de<span class="ls1 ws2">-</span></div><div class="t m0 x1 h8 y2ca ff7 fs7 fc0 sc0 ls18 ws102">pendency-refactoring efforts by ﬁnding </div><div class="t m0 x1 h8 y2cb ff7 fs7 fc0 sc0 ls18 ws1a0">targets that are relatively easy to remove </div><div class="t m0 x1 h8 y2cc ff7 fs7 fc0 sc0 ls18 ws2">or break up. </div><div class="t m0 x39 h15 y19e ff1 fsf fc3 sc0 ls19 ws2">A developer can<span class="_ _1"></span> </div><div class="t m0 x39 h15 y19f ff1 fsf fc3 sc0 ls19 ws2">make a major<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a0 ff1 fsf fc3 sc0 ls19 ws2">change touching<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a1 ff1 fsf fc3 sc0 ls19 ws2">hundreds or<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a2 ff1 fsf fc3 sc0 ls19 ws2">thousands of<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a3 ff1 fsf fc3 sc0 ls19 ws2">ﬁles across the<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a4 ff1 fsf fc3 sc0 ls19 ws2">repositor<span class="_ _1"></span>y in a<span class="_ _23"></span> </div><div class="t m0 x39 h15 y1a5 ff1 fsf fc3 sc0 ls19 ws2">single consistent<span class="_ _23"></span> </div><div class="t m0 x39 h15 y2cd ff1 fsf fc3 sc0 ls19 wsfe">operation.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfa" class="pf w0 h0" data-page-no="a"><div class="pc pca w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bga.png"/><div class="t m0 xe h2 y1 ff2 fs1 fc0 sc0 ls2 ws2">JUL<span class="_ _3"></span>Y 2016  |  VOL. 59  |  NO. 7  <span class="fc1 ls1">|<span class="_ _1"></span><span class="fc0 ws3">  </span></span><span class="ff1">COMMUNICA<span class="_ _0"></span>TIONS OF THE ACM<span class="ff2 ls1 ws1">    </span><span class="fs0 ls0 ws0">87</span></span></div><div class="t m0 x2c h10 y88 ff3 fs4 fc2 sc0 lsf ws2">contributed art<span class="_ _1"></span>icles</div><div class="t m0 x4 h8 yd8 ff7 fs7 fc0 sc0 ls1 wsb5">by teams that need to review an ongo<span class="ws2">-</span></div><div class="t m0 x4 h8 yd9 ff7 fs7 fc0 sc0 ls1 ws1e">ing stream of simple refactorings re<span class="ws2">-</span></div><div class="t m0 x4 h8 yda ff7 fs7 fc0 sc0 ls1 ws197">sulting from codebase-wide clean-ups </div><div class="t m0 x4 h8 ydb ff7 fs7 fc0 sc0 ls1 ws2">and centralized modernization efforts. </div><div class="t m0 x4 h9 y2ce ff1 fs7 fc0 sc0 ls1 ws2">Alternatives </div><div class="t m0 x4 h8 y2cf ff7 fs7 fc0 sc0 ls1 ws9f">As the popularity and use of distrib<span class="ws2">-</span></div><div class="t m0 x4 h8 y2d0 ff7 fs7 fc0 sc0 lse wsda">ute<span class="_ _0"></span>d ver<span class="_ _0"></span>sion control systems (DV<span class="_ _0"></span>CSs) </div><div class="t m0 x4 h8 y2d1 ff7 fs7 fc0 sc0 lse ws5d">like Git have grown, Google has con<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y2d2 ff7 fs7 fc0 sc0 lse ws10d">sidered whether to move from Piper </div><div class="t m0 x4 h8 y2d3 ff7 fs7 fc0 sc0 lse ws1a1">to Git as its primary version-control </div><div class="t m0 x4 h8 y2d4 ff7 fs7 fc0 sc0 lse ws1a2">system. A team at Google is focus<span class="_ _0"></span>ed </div><div class="t m0 x4 h8 y2d5 ff7 fs7 fc0 sc0 ls1 ws1a3">on supporting Git, which is used by </div><div class="t m0 x4 h8 y2d6 ff7 fs7 fc0 sc0 ls1 wsca">Google’s Android and Chrome teams </div><div class="t m0 x4 h8 y2d7 ff7 fs7 fc0 sc0 ls1 wsc3">outside the main Google repository<span class="_ _3"></span>. </div><div class="t m0 x4 h8 y2d8 ff7 fs7 fc0 sc0 ls1 ws13f">The use of Git is important for these </div><div class="t m0 x4 h8 y2d9 ff7 fs7 fc0 sc0 ls1 ws15c">teams due to external partner and open </div><div class="t m0 x4 h8 y2da ff7 fs7 fc0 sc0 ls1 ws2">source collaborations. </div><div class="t m0 x10 h8 y2db ff7 fs7 fc0 sc0 ls1 ws6a">The Git community strongly sug<span class="ws2">-</span></div><div class="t m0 x4 h8 y2dc ff7 fs7 fc0 sc0 ls1 ws1a4">gests and prefers developers have </div><div class="t m0 x4 h8 y2dd ff7 fs7 fc0 sc0 ls1 ws42">more and smaller repositories. A Git-</div><div class="t m0 x4 h8 y2de ff7 fs7 fc0 sc0 ls1 ws1a5">clone operation requires copying all </div><div class="t m0 x4 h8 y2df ff7 fs7 fc0 sc0 ls1 ws45">content to one’s local machine, a pro<span class="ws2">-</span></div><div class="t m0 x4 h8 y2e0 ff7 fs7 fc0 sc0 ls1 ws151">cedure incompatible with a large re<span class="ws2">-</span></div><div class="t m0 x4 h8 y2e1 ff7 fs7 fc0 sc0 ls21 ws143">pos<span class="_ _1"></span>itory. To move to Git-based source </div><div class="t m0 x4 h8 y2e2 ff7 fs7 fc0 sc0 ls21 ws9b">hosting, it would be necessary to split </div><div class="t m0 x4 h8 y2e3 ff7 fs7 fc0 sc0 ls21 ws112">Google’s repository into thousands of </div><div class="t m0 x4 h8 y2e4 ff7 fs7 fc0 sc0 ls21 ws4f">separate repositories to achieve reason<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y2e5 ff7 fs7 fc0 sc0 ls21 ws70">able performance. Such reorganization </div><div class="t m0 x4 h8 y2e6 ff7 fs7 fc0 sc0 ls21 ws104">would necessitate cultural and work<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y2e7 ff7 fs7 fc0 sc0 ls21 ws9f">ﬂow changes for Google’s developers. </div><div class="t m0 x4 h8 y2e8 ff7 fs7 fc0 sc0 ls21 ws142">As a comparison, Google’s Git-hosted </div><div class="t m0 x4 h8 y2e9 ff7 fs7 fc0 sc0 ls21 ws14e">Android codebase is divide<span class="_ _1"></span>d int<span class="_ _1"></span>o mo<span class="_ _1"></span>re </div><div class="t m0 x4 h8 y2ea ff7 fs7 fc0 sc0 ls1 ws2">than 800 separate repositories. </div><div class="t m0 x10 h8 y2eb ff7 fs7 fc0 sc0 ls1 ws3c">Given the value gained from the ex<span class="ws2">-</span></div><div class="t m0 x4 h8 y2ec ff7 fs7 fc0 sc0 ls1 ws1a6">isting tools Google has built and the </div><div class="t m0 x4 h8 y2ed ff7 fs7 fc0 sc0 ls1 ws1a7">many advantages of the monolithic </div><div class="t m0 x4 h8 y2ee ff7 fs7 fc0 sc0 ls1 ws8d">codebase structure, it is clear that mov<span class="ws2">-</span></div><div class="t m0 x4 h8 y2ef ff7 fs7 fc0 sc0 ls1 wsba">ing to more and smaller repositories </div><div class="t m0 x4 h8 y2f0 ff7 fs7 fc0 sc0 ls1 ws19d">would not make sense for Google’s </div><div class="t m0 x4 h8 y2f1 ff7 fs7 fc0 sc0 ls1 ws1a8">main repository<span class="_ _3"></span>. The alternative of </div><div class="t m0 x4 h8 y2f2 ff7 fs7 fc0 sc0 ls1 ws4c">moving to Git or any other DVCS that </div><div class="t m0 x4 h8 y2f3 ff7 fs7 fc0 sc0 ls1 ws1a9">would require repository splitting is </div><div class="t m0 x4 h8 y2f4 ff7 fs7 fc0 sc0 ls1 ws2">not compelling for Google.</div><div class="t m0 x10 h8 y2f5 ff7 fs7 fc0 sc0 ls10 wsc7">Current investment by the Google </div><div class="t m0 x4 h8 y2f6 ff7 fs7 fc0 sc0 ls10 ws3e">source team focuses primarily on the </div><div class="t m0 x4 h8 y2f7 ff7 fs7 fc0 sc0 ls10 ws1aa">ongoing reliability, scalability, and </div><div class="t m0 x4 h8 y2f8 ff7 fs7 fc0 sc0 ls10 ws7d">security of the in-house source sys<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y2f9 ff7 fs7 fc0 sc0 ls10 ws84">tems. The team is also pursuing an </div><div class="t m0 x4 h8 y2fa ff7 fs7 fc0 sc0 ls10 ws142">experimental effort with Mercurial,</div><div class="t m0 x3a ha y74 ff7 fs8 fc0 sc0 ls1 ws2">g</div><div class="t m0 x3b h8 y2fb ff7 fs7 fc0 sc0 ls1 ws2"> </div><div class="t m0 x4 h8 y2fc ff7 fs7 fc0 sc0 ls10 ws150">an open source DVCS similar to Git.<span class="_ _0"></span> </div><div class="t m0 x4 h8 y2fd ff7 fs7 fc0 sc0 ls10 ws1ab">The goal is to add scalability fea<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y2fe ff7 fs7 fc0 sc0 ls10 ws69">tures to the Mercurial client so it can </div><div class="t m0 x4 h8 y2ff ff7 fs7 fc0 sc0 ls10 ws1ac">efﬁciently support a codebase the </div><div class="t m0 x4 h8 y300 ff7 fs7 fc0 sc0 ls10 ws39">size of Google’s. This would provide </div><div class="t m0 x4 h8 y301 ff7 fs7 fc0 sc0 ls10 ws12e">Google’s developers with an alterna<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y302 ff7 fs7 fc0 sc0 ls10 ws56">tive of using popular DVCS-style work<span class="ls1 ws2">-</span></div><div class="t m0 x4 h8 y303 ff7 fs7 fc0 sc0 ls10 ws176">ﬂows in conjunction with the central </div><div class="t m0 x4 hb y54 ff7 fs0 fc0 sc0 ls1 ws1ad">g http://mercurial.selenic.com/</div><div class="t m0 x18 h8 yd8 ff7 fs7 fc0 sc0 ls10 ws172">Tech Leads of CitC; Hyrum Wright,<span class="_ _0"></span> </div><div class="t m0 x18 h8 yd9 ff7 fs7 fc0 sc0 ls10 ws103">Google’s large-scale refactoring guru; </div><div class="t m0 x18 h8 yda ff7 fs7 fc0 sc0 ls10 ws5c">and Chris Colohan, Caitlin Sadowski, </div><div class="t m0 x18 h8 ydb ff7 fs7 fc0 sc0 ls10 wsc8">Morgan Ames, Rob Siemborski, and<span class="_ _0"></span> </div><div class="t m0 x18 h8 ydc ff7 fs7 fc0 sc0 ls10 wsa5">the Piper and CitC development and </div><div class="t m0 x18 h8 ydd ff7 fs7 fc0 sc0 ls10 ws1ae">support teams for their insightful re<span class="ls1 ws2">-</span></div><div class="t m0 x18 h8 yde ff7 fs7 fc0 sc0 ls10 ws2">view comments.  </div><div class="t m0 x18 h19 y304 ff14 fs11 fc0 sc0 ls1 ws2">References </div><div class="t m0 x18 h1a y305 ffa fs11 fc0 sc0 ls1 ws2">1. <span class="_ _4"> </span>Bloch, D<span class="_ _0"></span>. <span class="ff15">Still All on One Ser<span class="_ _1"></span>ver: P<span class="_ _0"></span>erforce at Scale. </span></div><div class="t m0 xc h1a y306 ffa fs11 fc0 sc0 ls1 ws2">Google White Paper<span class="_ _3"></span>, 2011; http://info.perforce.</div><div class="t m0 xc h1a y307 ffa fs11 fc0 sc0 ls1 ws2">com/rs/perforce/images/GoogleWhitePaper-</div><div class="t m0 xc h1a y308 ffa fs11 fc0 sc0 ls1 ws2">StillAllonOneServer-PerforceatScale.pdf </div><div class="t m0 x18 h1a y309 ffa fs11 fc0 sc0 ls1 ws2">2. <span class="_ _24"> </span>Chang, F<span class="_ _0"></span>., Dean, J., Ghemawat, S., Hsieh, W<span class="_ _3"></span>.C., </div><div class="t m0 xc h1a y30a ffa fs11 fc0 sc0 ls1 ws2">W<span class="_ _0"></span>allach, D.A., Burrows, M., Chandra, T<span class="_ _3"></span>., Fikes, A., and </div><div class="t m0 xc h1a y30b ffa fs11 fc0 sc0 ls1 ws2">Gruber<span class="_ _3"></span>, R.E. Bigtable: A distributed storage system </div><div class="t m0 xc h1a y30c ffa fs11 fc0 sc0 ls1 ws2">for structured data. <span class="ff15">ACM T<span class="_ _3"></span>ransactions on Computer </span></div><div class="t m0 xc h1a y30d ff15 fs11 fc0 sc0 ls1 ws2">Systems 26<span class="ffa">, 2 (June 2008). </span></div><div class="t m0 x18 h1a y30e ffa fs11 fc0 sc0 ls1 ws2">3. <span class="_ _24"> </span>Corbett, J<span class="_ _0"></span>.C., Dean, J., Epstein, M., Fikes, A., Frost, </div><div class="t m0 xc h1a y30f ffa fs11 fc0 sc0 ls1 ws2">C., Furman, J<span class="_ _0"></span>., Ghemawat, S., Gubarev<span class="_ _0"></span>, A., Heiser<span class="_ _0"></span>, </div><div class="t m0 xc h1a y310 ffa fs11 fc0 sc0 ls1 ws2">C., Hochschild, P<span class="_ _3"></span>. et al. Spanner: Google’s globall<span class="_ _3"></span>y </div><div class="t m0 xc h1a y311 ffa fs11 fc0 sc0 ls1 ws2">distributed database. <span class="ff15">ACM T<span class="_ _3"></span>ransactions on Computer </span></div><div class="t m0 xc h1a y312 ff15 fs11 fc0 sc0 ls1 ws2">Systems 31<span class="ffa">, 3 (Aug. 2013). </span></div><div class="t m0 x18 h1a y313 ffa fs11 fc0 sc0 ls1 ws2">4. <span class="_ _25"> </span>Gabriel, R.P<span class="_ _3"></span>., Northrop, L., Schmidt, D.C., and Sullivan, </div><div class="t m0 xc h1a y314 ffa fs11 fc0 sc0 ls1 ws2">K. Ultra-large-scale systems. In <span class="ff15">Companion to the </span></div><div class="t m0 xc h1b y315 ff15 fs11 fc0 sc0 ls1 ws2">21st ACM SIGPLAN Symposium on Object-Oriented </div><div class="t m0 xc h1a y316 ff15 fs11 fc0 sc0 ls1 ws2">Programming Systems, L<span class="_ _0"></span>anguages, and Applications<span class="ffa"> </span></div><div class="t m0 xc h1a y317 ffa fs11 fc0 sc0 ls1 ws2">(Portland, OR, Oct. 22–<span class="_ _0"></span>26). ACM Press, New Y<span class="_ _3"></span>ork, </div><div class="t m0 xc h1a y318 ffa fs11 fc0 sc0 ls1 ws2">2006, 632–634. </div><div class="t m0 x18 h1a y319 ffa fs11 fc0 sc0 ls1 ws2">5. <span class="_ _25"> </span>Kemper<span class="_ _3"></span>, C. Build in the Cloud: How the Build System </div><div class="t m0 xc h1a y31a ffa fs11 fc0 sc0 ls1 ws2">works. Google Engineering T<span class="_ _3"></span>ools blog post, 2011; </div><div class="t m0 xc h1a y31b ffa fs11 fc0 sc0 ls1 ws2">http:/<span class="_ _0"></span>/google-engtools.blogspot.com/2011/08/build-</div><div class="t m0 xc h1a y31c ffa fs11 fc0 sc0 ls1 ws2">in-cloud-how-build-system-works.html </div><div class="t m0 x18 h1a y31d ffa fs11 fc0 sc0 ls1 ws2">6. <span class="_ _25"> </span>Lamport, L. Paxos made simple. <span class="ff15">ACM Sigact News 32</span>, </div><div class="t m0 xc h1a y31e ffa fs11 fc0 sc0 ls1 ws2">4 (Nov<span class="_ _0"></span>. 2001), 18–25. </div><div class="t m0 x18 h1a y31f ffa fs11 fc0 sc0 ls22 ws1af">7.<span class="_ _1"></span> <span class="_ _26"> </span><span class="ls1 ws2">Morgenthaler<span class="_ _3"></span>, J.D., Gridnev<span class="_ _3"></span>, M., Sauciuc, R., and </span></div><div class="t m0 xc h1a y320 ffa fs11 fc0 sc0 ls1 ws2">Bhansali, S. Searching for build debt: Experiences </div><div class="t m0 xc h1a y321 ffa fs11 fc0 sc0 ls1 ws2">managing technical debt at Google. In <span class="ff15">Proceedings </span></div><div class="t m0 xc h1b y322 ff15 fs11 fc0 sc0 ls1 ws2">of the Third International Workshop on Managing </div><div class="t m0 xc h1a y323 ff15 fs11 fc0 sc0 ls1 ws2">T<span class="_ _3"></span>echnical Debt <span class="ffa">(Zürich, Switzerland, June 2–<span class="_ _1"></span>9). IEEE </span></div><div class="t m0 xc h1a y324 ffa fs11 fc0 sc0 ls1 ws2">Press Piscataway<span class="_ _0"></span>, NJ, 2012, 1–6. </div><div class="t m0 x18 h1a y325 ffa fs11 fc0 sc0 ls1 ws2">8. <span class="_ _25"> </span>Ren, G., T<span class="_ _0"></span>une, E., Moseley<span class="_ _0"></span>, T<span class="_ _0"></span>., Shi, Y<span class="_ _3"></span>., Rus, S., and </div><div class="t m0 xc h1a y326 ffa fs11 fc0 sc0 ls1 ws2">Hundt, R. Google-wide proﬁling: A continuous proﬁling </div><div class="t m0 xc h1a y327 ffa fs11 fc0 sc0 ls1 ws2">infrastructure for data centers. <span class="ff15">IEEE Micro 30</span>, 4 </div><div class="t m0 xc h1a y328 ffa fs11 fc0 sc0 ls1 ws2">(2010), 65–79. </div><div class="t m0 x18 h1a y329 ffa fs11 fc0 sc0 ls1 ws2">9. <span class="_ _25"> </span>Sadowski, C., Stolee, K., and Elbaum, S. How </div><div class="t m0 xc h1a y32a ffa fs11 fc0 sc0 ls1 ws2">developers search for code: A case study<span class="_ _0"></span>. In </div><div class="t m0 xc h1b y32b ff15 fs11 fc0 sc0 ls1 ws2">Proceedings of the 10</div><div class="t m0 x58 h1c y32c ff15 fs12 fc0 sc0 ls1 ws2">th</div><div class="t m0 x59 h1b y32d ff15 fs11 fc0 sc0 ls1 ws2"> Joint Meeting on F<span class="_ _0"></span>oundations </div><div class="t m0 xc h1a y32e ff15 fs11 fc0 sc0 ls1 ws2">of Software Engineering <span class="ffa">(Bergamo, Italy<span class="_ _3"></span>, Aug. 30<span class="_ _1"></span>–</span></div><div class="t m0 xc h1a y32f ffa fs11 fc0 sc0 ls1 ws2">Sept. 4). ACM Press, New Y<span class="_ _3"></span>ork, 2015, 191–<span class="_ _0"></span>201. </div><div class="t m0 x18 h1a y330 ffa fs11 fc0 sc0 ls1 ws2">10. <span class="_ _2"> </span>Sadowski, C., van Gogh, J., Jaspan, C., Soederberg, E., </div><div class="t m0 xc h1a y331 ffa fs11 fc0 sc0 ls1 ws2">and Winter<span class="_ _3"></span>, C. Tricorder: Building a progr<span class="_ _0"></span>am analysis </div><div class="t m0 xc h1a y332 ffa fs11 fc0 sc0 ls1 ws2">ecosystem. In <span class="ff15">Proceedings of the 37</span></div><div class="t m0 x20 h1c y333 ff15 fs12 fc0 sc0 ls1 ws2">th</div><div class="t m0 x38 h1b y334 ff15 fs11 fc0 sc0 ls1 ws2"> International </div><div class="t m0 xc h1a y335 ff15 fs11 fc0 sc0 ls1 ws2">Conference on Software Engineering, Vol. 1 <span class="ffa">(Firenze, </span></div><div class="t m0 xc h1a y336 ffa fs11 fc0 sc0 ls1 ws2">Ital<span class="_ _0"></span>y, May 16–24). IEEE Press Piscataway<span class="_ _3"></span>, NJ, 2015, </div><div class="t m0 xc h1a y337 ffa fs11 fc0 sc0 ls1 ws2">598–<span class="_ _1"></span>608. </div><div class="t m0 x18 h1a y338 ffa fs11 fc0 sc0 ls1 ws2">11. <span class="_"> </span>Wasserman, L. Scalable, example-based refactorings </div><div class="t m0 xc h1a y339 ffa fs11 fc0 sc0 ls1 ws2">with Refaster<span class="_ _3"></span>. In <span class="ff15">Proceedings of the 2013 ACM </span></div><div class="t m0 xc h1a y33a ff15 fs11 fc0 sc0 ls1 ws2">Workshop on Refactoring T<span class="_ _5"></span>ools<span class="ffa"> (Indianapolis, IN, Oct. </span></div><div class="t m0 xc h1a y33b ffa fs11 fc0 sc0 ls1 ws2">26–31). ACM Press, New Y<span class="_ _0"></span>ork, 2013, 25–28. </div><div class="t m0 x18 h1a y33c ffa fs11 fc0 sc0 ls1 ws2">12. <span class="_"> </span>Wikipedia. Dependency hell. Accessed Jan. </div><div class="t m0 xc h1a y33d ffa fs11 fc0 sc0 ls1 ws2">20, 2015; http:/<span class="_ _0"></span>/en.wikipedia.org/w/index.</div><div class="t m0 xc h1a y33e ffa fs11 fc0 sc0 ls1 ws2">php?title=Dependency_hell&amp;oldid=634636715 </div><div class="t m0 x18 h1a y33f ffa fs11 fc0 sc0 ls1 ws2">13. <span class="_"> </span>Wikipedia. Filesystem in userspace. </div><div class="t m0 xc h1a y340 ffa fs11 fc0 sc0 ls1 ws2">Accessed June, 4, 2015; http:/<span class="_ _0"></span>/en.wikipedia.</div><div class="t m0 xc h1a y341 ffa fs11 fc0 sc0 ls1 ws2">org/w/index.php?title=Filesystem_in_</div><div class="t m0 xc h1a y342 ffa fs11 fc0 sc0 ls1 ws2">Userspace&amp;oldid=66477651<span class="_ _0"></span>4 </div><div class="t m0 x18 h1a y343 ffa fs11 fc0 sc0 ls1 ws2">14. <span class="_ _2"> </span>Wikipedia. Linux kernel. Accessed Jan. 20, 2015; </div><div class="t m0 xc h1a y344 ffa fs11 fc0 sc0 ls1 ws2">http:/<span class="_ _0"></span>/en.wikipedia.org/w/index.php?title=Linux_</div><div class="t m0 xc h1a y345 ffa fs11 fc0 sc0 ls1 ws2">kernel&amp;oldid=643170399 </div><div class="t m0 x18 h1a y346 ffa fs11 fc0 sc0 ls1 ws2">15. <span class="_"> </span>W<span class="_ _0"></span>right, H.K., Jasper<span class="_ _0"></span>, D., Klimek, M., Carruth, C., and </div><div class="t m0 xc h1a y347 ffa fs11 fc0 sc0 ls1 ws2">W<span class="_ _0"></span>an, Z. Large-scale automated refactoring using </div><div class="t m0 xc h1a y348 ffa fs11 fc0 sc0 ls1 ws2">ClangMR. In <span class="ff15">Proceedings of the IEEE International </span></div><div class="t m0 xc h1a y349 ff15 fs11 fc0 sc0 ls1 ws2">Conference on Software Maintenance <span class="ffa">(Eindhoven, </span></div><div class="t m0 xc h1a y34a ffa fs11 fc0 sc0 ls1 ws2">The Netherlands, Sept. 22–<span class="_ _0"></span>28). IEEE Press, 2013, </div><div class="t m0 xc h1a y34b ffa fs11 fc0 sc0 ls1 ws2">548<span class="_ _1"></span>–551. </div><div class="t m0 x18 h1a y34c ff14 fs11 fc0 sc0 ls1 ws2">Rachel Potvin <span class="ffa">(rpotvin@google.com) is an engineering </span></div><div class="t m0 x18 h1a y34d ffa fs11 fc0 sc0 ls1 ws2">manager at Google, Mountain View<span class="_ _0"></span>, CA. </div><div class="t m0 x18 h1a y34e ff14 fs11 fc0 sc0 ls1 ws2">Josh Levenberg <span class="ffa">(joshl@google.com) is a software </span></div><div class="t m0 x18 h1a y34f ffa fs11 fc0 sc0 ls1 ws2">engineer at Google, Mountain View<span class="_ _0"></span>, CA. </div><div class="t m0 x18 h1a y350 ffa fs11 fc0 sc0 ls1 ws2">Copyright held by the authors </div><div class="t m0 x15 h8 yd8 ff7 fs7 fc0 sc0 ls10 ws18">repository<span class="_ _3"></span>. This effort is in collabora<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 yd9 ff7 fs7 fc0 sc0 ls10 ws1b0">tion with the open source Mercurial </div><div class="t m0 x15 h8 yda ff7 fs7 fc0 sc0 ls10 ws1b1">community, including contributors </div><div class="t m0 x15 h8 ydb ff7 fs7 fc0 sc0 ls10 wsdb">from other companies that value the </div><div class="t m0 x15 h8 ydc ff7 fs7 fc0 sc0 ls10 ws2">monolithic source model. </div><div class="t m0 x15 h9 y2cf ff1 fs7 fc0 sc0 ls1 ws2">Conclusion </div><div class="t m0 x15 h8 y2d0 ff7 fs7 fc0 sc0 lse ws1a2">Goo<span class="_ _0"></span>gle chose the monolithic-source-</div><div class="t m0 x15 h8 y2d1 ff7 fs7 fc0 sc0 lse ws109">management strategy in 1999 when </div><div class="t m0 x15 h8 y2d2 ff7 fs7 fc0 sc0 lse ws1b2">the existing Google codebase was </div><div class="t m0 x15 h8 y2d3 ff7 fs7 fc0 sc0 lse wsef">migrated from CVS to Perforce. Early<span class="_ _0"></span> </div><div class="t m0 x15 h8 y2d4 ff7 fs7 fc0 sc0 lse ws13a">Google engineers maintained that a<span class="_ _0"></span> </div><div class="t m0 x15 h8 y2d5 ff7 fs7 fc0 sc0 lse ws1b3">sin<span class="_ _0"></span>gle repository was strictly better </div><div class="t m0 x15 h8 y2d6 ff7 fs7 fc0 sc0 lse ws1b4">than splitting up the codebase, though </div><div class="t m0 x15 h8 y2d7 ff7 fs7 fc0 sc0 lse ws4b">at the time they did not anticipate the </div><div class="t m0 x15 h8 y2d8 ff7 fs7 fc0 sc0 lse wsb1">future scale of the codebase and all </div><div class="t m0 x15 h8 y2d9 ff7 fs7 fc0 sc0 lse ws29">the supporting tooling that would <span class="_ _0"></span>be </div><div class="t m0 x15 h8 y2da ff7 fs7 fc0 sc0 ls1 ws2">built to make the scaling feasible. </div><div class="t m0 x16 h8 y2db ff7 fs7 fc0 sc0 ls1 wsa4">Over the years, as the investment re<span class="ws2">-</span></div><div class="t m0 x15 h8 y2dc ff7 fs7 fc0 sc0 ls1 ws17">quired to continue scaling the central<span class="ws2">-</span></div><div class="t m0 x15 h8 y2dd ff7 fs7 fc0 sc0 ls1 ws6a">ized repository grew, Google leader<span class="ws2">-</span></div><div class="t m0 x15 h8 y2de ff7 fs7 fc0 sc0 ls1 wsa6">ship occasionally considered whether </div><div class="t m0 x15 h8 y2df ff7 fs7 fc0 sc0 ls1 ws55">it would make sense to move from the </div><div class="t m0 x15 h8 y2e0 ff7 fs7 fc0 sc0 ls1 ws88">monolithic model. Despite the effort </div><div class="t m0 x15 h8 y2e1 ff7 fs7 fc0 sc0 ls1 ws158">required, Google repeatedly chose to </div><div class="t m0 x15 h8 y2e2 ff7 fs7 fc0 sc0 ls1 wse7">stick with the central repository due to </div><div class="t m0 x15 h8 y2e3 ff7 fs7 fc0 sc0 ls1 ws2">its advantages. </div><div class="t m0 x16 h8 y2e4 ff7 fs7 fc0 sc0 lse wsc3">The monolithic model of source </div><div class="t m0 x15 h8 y2e5 ff7 fs7 fc0 sc0 lse ws2">code management is not for everyone. </div><div class="t m0 x15 h8 y2e6 ff7 fs7 fc0 sc0 ls10 ws4d">It is best suited to organizations like<span class="_ _0"></span> </div><div class="t m0 x15 h8 y2e7 ff7 fs7 fc0 sc0 ls10 ws62">Google, with an open and collabora<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y2e8 ff7 fs7 fc0 sc0 ls10 ws1b5">tive culture. It would not work well </div><div class="t m0 x15 h8 y2e9 ff7 fs7 fc0 sc0 ls9 ws68">for or<span class="_ _0"></span>ganizations where large parts </div><div class="t m0 x15 h8 y2ea ff7 fs7 fc0 sc0 ls9 ws1b6">of the codebase are private or hidden </div><div class="t m0 x15 h8 y2eb ff7 fs7 fc0 sc0 ls9 ws2">between groups. </div><div class="t m0 x16 h8 y2ec ff7 fs7 fc0 sc0 ls1f wsec">At Google, we have found, with some </div><div class="t m0 x15 h8 y2ed ff7 fs7 fc0 sc0 ls1f wsc5">investment, the monolithic model of </div><div class="t m0 x15 h8 y2ee ff7 fs7 fc0 sc0 ls1f ws147">source management can scale success<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y2ef ff7 fs7 fc0 sc0 ls1f ws4d">fully to a codebase with more than one </div><div class="t m0 x15 h8 y2f0 ff7 fs7 fc0 sc0 ls1f ws1b7">billion ﬁles, 35 million commits, and </div><div class="t m0 x15 h8 y2f1 ff7 fs7 fc0 sc0 ls1f ws82">thousands of users around the globe. As </div><div class="t m0 x15 h8 y2f2 ff7 fs7 fc0 sc0 ls1f ws1b8">the scale and complexity of projects both </div><div class="t m0 x15 h8 y2f3 ff7 fs7 fc0 sc0 ls1f ws42">inside and outside Google continue to </div><div class="t m0 x15 h8 y2f4 ff7 fs7 fc0 sc0 ls1f ws1b9">grow, we hope the analysis and workﬂow </div><div class="t m0 x15 h8 y2f5 ff7 fs7 fc0 sc0 ls1f ws1ba">described in this article can beneﬁt oth<span class="ls1 ws2">-</span></div><div class="t m0 x15 h8 y2f6 ff7 fs7 fc0 sc0 ls1f ws6">ers weighing decisions on the long-term </div><div class="t m0 x15 h8 y2f7 ff7 fs7 fc0 sc0 ls1f ws2">structure for their codebases. </div><div class="t m0 x15 h9 y351 ff1 fs7 fc0 sc0 ls1 ws2">Acknowledgments </div><div class="t m0 x15 h8 y352 ff7 fs7 fc0 sc0 ls10 ws54">W<span class="_ _0"></span>e would like to recognize all current </div><div class="t m0 x15 h8 y353 ff7 fs7 fc0 sc0 ls10 ws129">and former members of the Google </div><div class="t m0 x15 h8 y354 ff7 fs7 fc0 sc0 ls10 ws17e">Developer Infrastructure teams for </div><div class="t m0 x15 h8 y355 ff7 fs7 fc0 sc0 ls10 ws1bb">their dedication in building and </div><div class="t m0 x15 h8 y356 ff7 fs7 fc0 sc0 ls10 ws158">maintaining the systems referenced </div><div class="t m0 x15 h8 y357 ff7 fs7 fc0 sc0 ls10 wsb7">in this article, as well as the many </div><div class="t m0 x15 h8 y358 ff7 fs7 fc0 sc0 ls10 ws14a">people who helped in reviewing the </div><div class="t m0 x15 h8 y359 ff7 fs7 fc0 sc0 ls10 ws69">article; in particular: Jon Perkins and<span class="_ _0"></span> </div><div class="t m0 x15 h8 y35a ff7 fs7 fc0 sc0 ls10 ws103">Ingo Walther, the current T<span class="_ _0"></span>ech Leads </div><div class="t m0 x15 h8 y35b ff7 fs7 fc0 sc0 ls10 ws56">of Piper; Kyle Lippincott and Crutcher </div><div class="t m0 x15 h8 y35c ff7 fs7 fc0 sc0 ls10 ws68">Dunnavant, the current and former </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
</div>
<div class="loading-indicator">
<img alt="" src="pdf2htmlEX-64x64.png"/>
</div>
